<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Scalability | Software Engineering Hub</title><link rel="canonical" href="https://sitharaj88.github.io/software-engineering/system-design/scalability/"/><link rel="sitemap" href="/software-engineering/sitemap-index.xml"/><link rel="shortcut icon" href="/software-engineering/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.16.15"/><meta name="generator" content="Starlight v0.30.6"/><meta property="og:title" content="Scalability"/><meta property="og:type" content="article"/><meta property="og:url" content="https://sitharaj88.github.io/software-engineering/system-design/scalability/"/><meta property="og:locale" content="en"/><meta property="og:description" content="Horizontal scaling, load balancing, caching, message queues, rate limiting, and database scaling patterns"/><meta property="og:site_name" content="Software Engineering Hub"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="Horizontal scaling, load balancing, caching, message queues, rate limiting, and database scaling patterns"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/software-engineering/_astro/index.CprImThi.css">
<style>:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-avdet4wd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-avdet4wd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-avdet4wd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-avdet4wd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-avdet4wd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-avdet4wd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-avdet4wd){vertical-align:middle}
.card:where(.astro-v5tidmuc){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-v5tidmuc):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-v5tidmuc):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-v5tidmuc):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-v5tidmuc):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-v5tidmuc){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-v5tidmuc) .icon:where(.astro-v5tidmuc){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem}.card:where(.astro-v5tidmuc) .body:where(.astro-v5tidmuc){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}
.card-grid:where(.astro-zntqmydn){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-zntqmydn)>*{margin-top:0!important}@media(min-width:50rem){.card-grid:where(.astro-zntqmydn){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-zntqmydn){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-zntqmydn)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}
svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
starlight-tabs:where(.astro-esqgolmp){display:block}.tablist-wrapper:where(.astro-esqgolmp){overflow-x:auto}:where(.astro-esqgolmp)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-esqgolmp){margin-bottom:-2px}.tab:where(.astro-esqgolmp)>:where(.astro-esqgolmp)[role=tab]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;text-decoration:none;border-bottom:2px solid var(--sl-color-gray-5);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-esqgolmp) :where(.astro-esqgolmp)[role=tab][aria-selected=true]{color:var(--sl-color-white);border-color:var(--sl-color-text-accent);font-weight:600}.tablist-wrapper:where(.astro-esqgolmp)~[role=tabpanel]{margin-top:1rem}
.sl-link-card:where(.astro-mf7fz2mj){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-mf7fz2mj){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-mf7fz2mj):before{content:"";position:absolute;inset:0}.stack:where(.astro-mf7fz2mj){flex-direction:column;gap:.5rem}.title:where(.astro-mf7fz2mj){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-mf7fz2mj):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-mf7fz2mj):hover .icon:where(.astro-mf7fz2mj){color:var(--sl-color-white)}
.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}
.sl-link-button:where(.astro-xwgiixxa){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-xwgiixxa).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-xwgiixxa).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-xwgiixxa) svg{flex-shrink:0}@media(min-width:50rem){.sl-link-button:where(.astro-xwgiixxa){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa):not(:where(p *)){margin-block:1rem}
</style><script type="module" src="/software-engineering/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/software-engineering/" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3" translate="no"> Software Engineering Hub </span> </a>  </div> <div class="sl-flex astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = 'âŒ˜';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/software-engineering/_astro/Search.astro_astro_type_script_index_0_lang.CSD5BS71.js"></script>   </div> <div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/sitharaj88/software-engineering" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="1wgz9ym" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Getting Started</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/getting-started" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/getting-started/how-to-use" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">How to Use This Site</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/getting-started/learning-paths" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Learning Paths</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Data Structures &amp; Algorithms</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/dsa" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Fundamentals</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/fundamentals/big-o-notation" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Big O Notation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/fundamentals/time-complexity" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Time Complexity</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/fundamentals/space-complexity" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Space Complexity</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Linear Data Structures</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/arrays" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Arrays</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/arrays/two-pointers" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Two Pointers</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/arrays/sliding-window" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sliding Window</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/strings" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Strings</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/linked-lists" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Linked Lists</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/stacks" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Stacks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/queues" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Queues</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Non-Linear Data Structures</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/hash-tables" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Hash Tables</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/trees" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Trees</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/heaps" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Heaps</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/graphs" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Graphs</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Algorithms</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/sorting" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sorting</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/searching/binary-search" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Binary Search</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/recursion" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Recursion</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/backtracking" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Backtracking</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/dynamic-programming" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dynamic Programming</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/dsa/greedy" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Greedy</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="6"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">System Design</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/system-design" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/system-design/fundamentals" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fundamentals</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/system-design/databases" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Databases</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/system-design/scalability" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Scalability</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/system-design/case-studies" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Case Studies</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="7"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Design Patterns</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/design-patterns" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/design-patterns/creational" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Creational Patterns</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/design-patterns/structural" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Structural Patterns</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/design-patterns/behavioral" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Behavioral Patterns</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="8"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Interview Preparation</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/software-engineering/interview-prep" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/interview-prep/coding-interviews" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Coding Interviews</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/interview-prep/behavioral" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Behavioral Interviews</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/software-engineering/interview-prep/problem-bank" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Problem Bank (76 Problems)</span>  </a> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/sitharaj88/software-engineering" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <script type="module" src="/software-engineering/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script><script type="module" src="/software-engineering/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script><div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#horizontal-vs-vertical-scaling" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Horizontal vs Vertical Scaling</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#vertical-scaling-scale-up" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Vertical Scaling (Scale Up)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#horizontal-scaling-scale-out" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Horizontal Scaling (Scale Out)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-to-use-each" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">When to Use Each</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#load-balancing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Load Balancing</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#architecture" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Architecture</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#load-balancing-algorithms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Load Balancing Algorithms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#layer-4-vs-layer-7-load-balancing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Layer 4 vs Layer 7 Load Balancing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#health-checks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Health Checks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#real-world-example-multi-tier-load-balancing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Real-World Example: Multi-Tier Load Balancing</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#caching" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Caching</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-hierarchy" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Hierarchy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#caching-strategies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Caching Strategies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-eviction-policies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Eviction Policies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-invalidation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Invalidation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cdn-content-delivery-network" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">CDN (Content Delivery Network)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#message-queues" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Message Queues</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#why-use-message-queues" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Why Use Message Queues</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#message-queue-patterns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Message Queue Patterns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#message-queue-technologies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Message Queue Technologies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#kafka-architecture-example" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Kafka Architecture Example</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#handling-failures-in-message-processing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Handling Failures in Message Processing</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#rate-limiting" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Rate Limiting</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#common-algorithms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Common Algorithms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#rate-limiting-implementation-with-redis" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Rate Limiting Implementation with Redis</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#rate-limiting-response-headers" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Rate Limiting Response Headers</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#database-scaling-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Database Scaling Patterns</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-1-read-replicas-with-writeread-splitting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 1: Read Replicas with Write/Read Splitting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-2-cqrs-command-query-responsibility-segregation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 2: CQRS (Command Query Responsibility Segregation)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-3-database-per-service-microservices" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 3: Database per Service (Microservices)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#microservices-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Microservices Patterns</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#api-gateway" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">API Gateway</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#circuit-breaker" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Circuit Breaker</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#service-discovery" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Service Discovery</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#real-world-scaling-example-from-0-to-millions" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Real-World Scaling Example: From 0 to Millions</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-1-single-server-0-1k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 1: Single Server (0-1K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-2-separate-db-1k-10k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 2: Separate DB (1K-10K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-3-add-cache-and-load-balancer-10k-100k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 3: Add Cache and Load Balancer (10K-100K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-4-read-replicas-cdn-mq-100k-1m-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 4: Read Replicas, CDN, MQ (100K-1M users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-5-sharding-multi-region-1m-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 5: Sharding, Multi-Region (1M+ users)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#summary" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Summary</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#horizontal-vs-vertical-scaling" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Horizontal vs Vertical Scaling</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#vertical-scaling-scale-up" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Vertical Scaling (Scale Up)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#horizontal-scaling-scale-out" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Horizontal Scaling (Scale Out)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-to-use-each" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">When to Use Each</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#load-balancing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Load Balancing</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#architecture" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Architecture</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#load-balancing-algorithms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Load Balancing Algorithms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#layer-4-vs-layer-7-load-balancing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Layer 4 vs Layer 7 Load Balancing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#health-checks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Health Checks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#real-world-example-multi-tier-load-balancing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Real-World Example: Multi-Tier Load Balancing</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#caching" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Caching</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-hierarchy" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Hierarchy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#caching-strategies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Caching Strategies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-eviction-policies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Eviction Policies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cache-invalidation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Cache Invalidation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#cdn-content-delivery-network" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">CDN (Content Delivery Network)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#message-queues" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Message Queues</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#why-use-message-queues" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Why Use Message Queues</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#message-queue-patterns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Message Queue Patterns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#message-queue-technologies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Message Queue Technologies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#kafka-architecture-example" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Kafka Architecture Example</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#handling-failures-in-message-processing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Handling Failures in Message Processing</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#rate-limiting" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Rate Limiting</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#common-algorithms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Common Algorithms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#rate-limiting-implementation-with-redis" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Rate Limiting Implementation with Redis</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#rate-limiting-response-headers" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Rate Limiting Response Headers</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#database-scaling-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Database Scaling Patterns</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-1-read-replicas-with-writeread-splitting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 1: Read Replicas with Write/Read Splitting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-2-cqrs-command-query-responsibility-segregation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 2: CQRS (Command Query Responsibility Segregation)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pattern-3-database-per-service-microservices" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Pattern 3: Database per Service (Microservices)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#microservices-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Microservices Patterns</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#api-gateway" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">API Gateway</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#circuit-breaker" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Circuit Breaker</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#service-discovery" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Service Discovery</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#real-world-scaling-example-from-0-to-millions" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Real-World Scaling Example: From 0 to Millions</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-1-single-server-0-1k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 1: Single Server (0-1K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-2-separate-db-1k-10k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 2: Separate DB (1K-10K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-3-add-cache-and-load-balancer-10k-100k-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 3: Add Cache and Load Balancer (10K-100K users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-4-read-replicas-cdn-mq-100k-1m-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 4: Read Replicas, CDN, MQ (100K-1M users)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stage-5-sharding-multi-region-1m-users" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stage 5: Sharding, Multi-Region (1M+ users)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#summary" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Summary</span> </a>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Scalability</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <p>Scalability is a systemâ€™s ability to handle increasing amounts of work by adding resources. A scalable system can grow from serving 100 users to 100 million users without a complete redesign. This page covers the core patterns and strategies that make this possible.</p>
<hr>
<h2 id="horizontal-vs-vertical-scaling">Horizontal vs Vertical Scaling</h2>
<h3 id="vertical-scaling-scale-up">Vertical Scaling (Scale Up)</h3>
<p>Add more resources (CPU, RAM, disk) to a single machine.</p>
<div class="expressive-code"><link rel="stylesheet" href="/software-engineering/_astro/ec.j8ofn.css"><script type="module" src="/software-engineering/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Before:                     After:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  Server         â”‚          â”‚  Server (upgraded)      â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  4 CPU cores    â”‚          â”‚  32 CPU cores           â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  16 GB RAM      â”‚   â”€â”€â–º   â”‚  256 GB RAM             â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  500 GB SSD     â”‚          â”‚  4 TB NVMe SSD          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                 â”‚          â”‚                         â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  Handles 1K rps â”‚          â”‚  Handles 10K rps        â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Before:                     After:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  Server         â”‚          â”‚  Server (upgraded)      â”‚â”‚  4 CPU cores    â”‚          â”‚  32 CPU cores           â”‚â”‚  16 GB RAM      â”‚   â”€â”€â–º   â”‚  256 GB RAM             â”‚â”‚  500 GB SSD     â”‚          â”‚  4 TB NVMe SSD          â”‚â”‚                 â”‚          â”‚                         â”‚â”‚  Handles 1K rps â”‚          â”‚  Handles 10K rps        â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Simple (no code changes), no distributed system complexity, strong consistency
<strong>Cons</strong>: Hardware limits (you cannot buy a server with 10,000 cores), single point of failure, expensive at high end, downtime during upgrades</p>
<h3 id="horizontal-scaling-scale-out">Horizontal Scaling (Scale Out)</h3>
<p>Add more machines to distribute the load.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Before:                     After:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  Server         â”‚          â”‚  Server 1       â”‚  â† 3K rps</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  Handles 1K rps â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                     </span></span><span style="--0:#d6deeb;--1:#403f53">â”€â”€â–º    â”‚  Server 2       â”‚  â† 3K rps</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  Server 3       â”‚  â† 3K rps</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">Total: 9K rps</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">(add more as needed)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Before:                     After:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  Server         â”‚          â”‚  Server 1       â”‚  â† 3K rpsâ”‚  Handles 1K rps â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”€â”€â–º    â”‚  Server 2       â”‚  â† 3K rps                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚  Server 3       â”‚  â† 3K rps                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            Total: 9K rps                            (add more as needed)"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Near-linear capacity growth, no single point of failure, cost-effective (commodity hardware), no downtime for scaling
<strong>Cons</strong>: Application must be stateless or use shared state, distributed system complexity (consistency, coordination), operational overhead</p>
<h3 id="when-to-use-each">When to Use Each</h3>













































<table><thead><tr><th>Scenario</th><th>Recommended</th><th>Reason</th></tr></thead><tbody><tr><td>Early-stage startup</td><td>Vertical</td><td>Simpler, cheaper for small scale</td></tr><tr><td>Database server</td><td>Vertical first, then replicas</td><td>Databases are harder to distribute</td></tr><tr><td>Stateless API servers</td><td>Horizontal</td><td>Easy to add/remove instances</td></tr><tr><td>Cache layer</td><td>Horizontal</td><td>Redis Cluster, Memcached pools</td></tr><tr><td>Reaching hardware limits</td><td>Horizontal</td><td>Only option beyond largest machines</td></tr><tr><td>Predictable, gradual growth</td><td>Vertical</td><td>Scale the single server incrementally</td></tr><tr><td>Unpredictable traffic spikes</td><td>Horizontal (auto-scaling)</td><td>Add/remove instances dynamically</td></tr></tbody></table>
<hr>
<h2 id="load-balancing">Load Balancing</h2>
<p>A load balancer distributes incoming requests across multiple servers to ensure no single server is overwhelmed.</p>
<h3 id="architecture">Architecture</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  Server 1   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚ (healthy)   â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚          â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Clients  â”‚â”€â”€â–ºâ”‚  Load    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚          â”‚   â”‚ Balancer â”‚  Server 2   â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚          â”‚   â”‚         â”‚ (healthy)   â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  (L7)   â”‚             â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">               </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">               </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">               </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚  Server 3   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">               </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (unhealthy) â”‚ â† removed from pool</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚      âœ—      â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  Server 1   â”‚                          â”‚ (healthy)   â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚â”‚          â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ Clients  â”‚â”€â”€â–ºâ”‚  Load    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚          â”‚   â”‚ Balancer â”‚  Server 2   â”‚â”‚          â”‚   â”‚         â”‚ (healthy)   â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  (L7)   â”‚             â”‚               â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚         â”‚  Server 3   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (unhealthy) â”‚ â† removed from pool                          â”‚      âœ—      â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="load-balancing-algorithms">Load Balancing Algorithms</h3>













































<table><thead><tr><th>Algorithm</th><th>How It Works</th><th>Best For</th></tr></thead><tbody><tr><td><strong>Round Robin</strong></td><td>Distribute requests sequentially (1â†’2â†’3â†’1â†’2â†’3)</td><td>Equal-capacity servers, uniform requests</td></tr><tr><td><strong>Weighted Round Robin</strong></td><td>Like round robin but servers get proportional share</td><td>Servers with different capacities</td></tr><tr><td><strong>Least Connections</strong></td><td>Send to server with fewest active connections</td><td>Varying request durations</td></tr><tr><td><strong>Weighted Least Connections</strong></td><td>Least connections weighted by server capacity</td><td>Mixed server fleet</td></tr><tr><td><strong>IP Hash</strong></td><td>Hash client IP to determine server</td><td>Session affinity without cookies</td></tr><tr><td><strong>Least Response Time</strong></td><td>Send to server with fastest response + fewest connections</td><td>Performance-sensitive applications</td></tr><tr><td><strong>Random</strong></td><td>Random server selection</td><td>Simple, surprisingly effective at scale</td></tr></tbody></table>
<h3 id="layer-4-vs-layer-7-load-balancing">Layer 4 vs Layer 7 Load Balancing</h3>








































<table><thead><tr><th>Feature</th><th>Layer 4 (Transport)</th><th>Layer 7 (Application)</th></tr></thead><tbody><tr><td><strong>Operates on</strong></td><td>IP addresses, TCP/UDP ports</td><td>HTTP headers, URLs, cookies</td></tr><tr><td><strong>Speed</strong></td><td>Very fast (no payload inspection)</td><td>Slower (inspects content)</td></tr><tr><td><strong>Routing decisions</strong></td><td>Based on IP and port</td><td>Based on URL path, headers, content</td></tr><tr><td><strong>SSL termination</strong></td><td>No (passes through)</td><td>Yes (decrypts and re-encrypts)</td></tr><tr><td><strong>Use case</strong></td><td>Raw TCP/UDP traffic, gaming</td><td>HTTP APIs, microservices, A/B testing</td></tr><tr><td><strong>Examples</strong></td><td>AWS NLB, HAProxy (TCP mode)</td><td>AWS ALB, Nginx, HAProxy (HTTP mode)</td></tr></tbody></table>
<h3 id="health-checks">Health Checks</h3>
<p>Load balancers must know which servers are healthy. Common health check patterns:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Simple HTTP health check endpoint</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3C63B3">@app.get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">/health</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">health_check</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">checks </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">database</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#B2CCD6;--1:#097174">check_db_connection</span><span style="--0:#D6DEEB;--1:#403F53">(),</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">cache</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#B2CCD6;--1:#097174">check_redis_connection</span><span style="--0:#D6DEEB;--1:#403F53">(),</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">disk_space</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#B2CCD6;--1:#097174">check_disk_space</span><span style="--0:#D6DEEB;--1:#403F53">(),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">all_healthy </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">all</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">checks.</span><span style="--0:#B2CCD6;--1:#097174">values</span><span style="--0:#D6DEEB;--1:#403F53">())</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">status_code </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">200</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> all_healthy </span><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">503</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">JSONResponse</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D7DBE0;--1:#403F53">content</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">{</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">status</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#82AAFF;--1:#3C63B3">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">healthy</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#82AAFF;--1:#3C63B3"> all_healthy </span><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">unhealthy</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#82AAFF;--1:#3C63B3">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">checks</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#82AAFF;--1:#3C63B3">: checks}</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D7DBE0;--1:#403F53">status_code</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#82AAFF;--1:#3C63B3">status_code</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# Simple HTTP health check endpoint@app.get(&#x22;/health&#x22;)def health_check():    checks = {        &#x22;database&#x22;: check_db_connection(),        &#x22;cache&#x22;: check_redis_connection(),        &#x22;disk_space&#x22;: check_disk_space(),    }    all_healthy = all(checks.values())    status_code = 200 if all_healthy else 503    return JSONResponse(        content={&#x22;status&#x22;: &#x22;healthy&#x22; if all_healthy else &#x22;unhealthy&#x22;, &#x22;checks&#x22;: checks},        status_code=status_code    )"><div></div></button></div></figure></div>
<h3 id="real-world-example-multi-tier-load-balancing">Real-World Example: Multi-Tier Load Balancing</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Internet</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ DNS-based  â”‚  Round-robin across geographic regions</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Load Bal.  â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼        â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚CDN â”‚  â”‚CDN â”‚  Edge nodes serve static content</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚Edgeâ”‚  â”‚Edgeâ”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”˜  â””â”€â”€â”¬â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚       â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼       â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  L7 Load     â”‚  Route by URL path (/api â†’ API, /ws â†’ WebSocket)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  Balancer    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  (ALB/Nginx) â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚    â”‚  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼    â–¼  â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚API â”‚â”‚API â”‚â”‚API â”‚  Stateless application servers</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ 1  â”‚â”‚ 2  â”‚â”‚ 3  â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”˜â””â”€â”€â”¬â”€â”˜â””â”€â”€â”¬â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚     â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼     â–¼     â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Internal L4 LB   â”‚  Route to database/cache cluster</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼          â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  DB  â”‚  â”‚Redis â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚Primaryâ”‚ â”‚Clusterâ”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Internet    â”‚    â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ DNS-based  â”‚  Round-robin across geographic regionsâ”‚ Load Bal.  â”‚â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”  â–¼        â–¼â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”â”‚CDN â”‚  â”‚CDN â”‚  Edge nodes serve static contentâ”‚Edgeâ”‚  â”‚Edgeâ”‚â””â”€â”€â”¬â”€â”˜  â””â”€â”€â”¬â”€â”˜   â”‚       â”‚   â–¼       â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  L7 Load     â”‚  Route by URL path (/api â†’ API, /ws â†’ WebSocket)â”‚  Balancer    â”‚â”‚  (ALB/Nginx) â”‚â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”˜   â”‚    â”‚  â”‚   â–¼    â–¼  â–¼â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”‚API â”‚â”‚API â”‚â”‚API â”‚  Stateless application serversâ”‚ 1  â”‚â”‚ 2  â”‚â”‚ 3  â”‚â””â”€â”€â”¬â”€â”˜â””â”€â”€â”¬â”€â”˜â””â”€â”€â”¬â”€â”˜   â”‚     â”‚     â”‚   â–¼     â–¼     â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Internal L4 LB   â”‚  Route to database/cache clusterâ””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â–¼          â–¼â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”â”‚  DB  â”‚  â”‚Redis â”‚â”‚Primaryâ”‚ â”‚Clusterâ”‚â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<hr>
<h2 id="caching">Caching</h2>
<p>Caching stores copies of frequently accessed data in faster storage to reduce latency and backend load. A well-implemented cache can reduce database queries by 90% or more.</p>
<h3 id="cache-hierarchy">Cache Hierarchy</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Request Flow (fastest to slowest):</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  1. Browser Cache      (~0ms)   - HTTP cache headers  â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  2. CDN Cache          (~10ms)  - Edge servers         â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  3. API Gateway Cache  (~1ms)   - Reverse proxy cache  â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  4. Application Cache  (~1ms)   - In-memory (Redis)    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  5. Database Cache     (~5ms)   - Query result cache   â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  6. Database Disk      (~10ms)  - Actual data read     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Request Flow (fastest to slowest):â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  1. Browser Cache      (~0ms)   - HTTP cache headers  â”‚â”‚  2. CDN Cache          (~10ms)  - Edge servers         â”‚â”‚  3. API Gateway Cache  (~1ms)   - Reverse proxy cache  â”‚â”‚  4. Application Cache  (~1ms)   - In-memory (Redis)    â”‚â”‚  5. Database Cache     (~5ms)   - Query result cache   â”‚â”‚  6. Database Disk      (~10ms)  - Actual data read     â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="caching-strategies">Caching Strategies</h3>
<h4 id="cache-aside-lazy-loading">Cache-Aside (Lazy Loading)</h4>
<p>The application manages the cache explicitly. Most common strategy.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Read Path:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. App checks cache</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. Cache HIT â†’ return cached data</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. Cache MISS â†’ query database â†’ store in cache â†’ return</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”  1. GET key  â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚(Redis)â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚  2. HIT/MISS  â””â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚  3. (on MISS)  â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ DB â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚  4. Return dataâ””â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚  5. SET key    â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Read Path:1. App checks cache2. Cache HIT â†’ return cached data3. Cache MISS â†’ query database â†’ store in cache â†’ returnâ”Œâ”€â”€â”€â”€â”€â”  1. GET key  â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚(Redis)â”‚â”‚     â”‚  2. HIT/MISS  â””â”€â”€â”€â”€â”€â”€â”€â”˜â”‚     â”‚â”‚     â”‚  3. (on MISS)  â”Œâ”€â”€â”€â”€â”â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ DB â”‚â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚â”‚     â”‚  4. Return dataâ””â”€â”€â”€â”€â”˜â”‚     â”‚â”‚     â”‚  5. SET key    â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â””â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">get_user</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">user_id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#C5E478;--1:#3C63B3">str</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#C5E478;--1:#3C63B3">dict</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671"># 1. Check cache</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">cached </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> redis.</span><span style="--0:#B2CCD6;--1:#097174">get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">f</span><span style="--0:#ECC48D;--1:#9B504E">"user:</span><span style="--0:#82AAFF;--1:#3C63B3">{user_id}</span><span style="--0:#ECC48D;--1:#9B504E">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> cached:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> json.</span><span style="--0:#B2CCD6;--1:#097174">loads</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">cached</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671"># 2. Cache miss â€” query database</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">user </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> db.</span><span style="--0:#B2CCD6;--1:#097174">query</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">SELECT * FROM users WHERE id = </span><span style="--0:#82AAFF;--1:#3C63B3">%s</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> user_id</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671"># 3. Store in cache with TTL</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">redis.</span><span style="--0:#B2CCD6;--1:#097174">setex</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">f</span><span style="--0:#ECC48D;--1:#9B504E">"user:</span><span style="--0:#82AAFF;--1:#3C63B3">{user_id}</span><span style="--0:#ECC48D;--1:#9B504E">"</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#F78C6C;--1:#AA0982">3600</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> json.</span><span style="--0:#B2CCD6;--1:#097174">dumps</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">user</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> user</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="def get_user(user_id: str) -> dict:    # 1. Check cache    cached = redis.get(f&#x22;user:{user_id}&#x22;)    if cached:        return json.loads(cached)    # 2. Cache miss â€” query database    user = db.query(&#x22;SELECT * FROM users WHERE id = %s&#x22;, user_id)    # 3. Store in cache with TTL    redis.setex(f&#x22;user:{user_id}&#x22;, 3600, json.dumps(user))    return user"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Only caches data that is actually requested, resilient to cache failures
<strong>Cons</strong>: Cache miss penalty (three round trips), potential for stale data</p>
<h4 id="write-through">Write-Through</h4>
<p>Every write goes to the cache AND the database simultaneously.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Write Path:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. App writes to cache</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. Cache writes to database</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. Both are updated before returning</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”  1. Write  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  2. Write  â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ DB â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”˜  3. ACK     â””â”€â”€â”€â”€â”€â”€â”€â”˜  4. ACK     â””â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Write Path:1. App writes to cache2. Cache writes to database3. Both are updated before returningâ”Œâ”€â”€â”€â”€â”€â”  1. Write  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  2. Write  â”Œâ”€â”€â”€â”€â”â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ DB â”‚â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚â””â”€â”€â”€â”€â”€â”˜  3. ACK     â””â”€â”€â”€â”€â”€â”€â”€â”˜  4. ACK     â””â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Cache always has latest data, strong consistency
<strong>Cons</strong>: Higher write latency (two writes), caches data that may never be read</p>
<h4 id="write-behind-write-back">Write-Behind (Write-Back)</h4>
<p>Write to the cache immediately, then asynchronously write to the database.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Write Path:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. App writes to cache (returns immediately)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. Cache asynchronously flushes to database (batched)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”  1. Write  â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â”€â”€(async)â”€â”€â–ºâ”‚ DB â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚  batched  â”‚    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”˜  2. ACK     â””â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">(fast!)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Write Path:1. App writes to cache (returns immediately)2. Cache asynchronously flushes to database (batched)â”Œâ”€â”€â”€â”€â”€â”  1. Write  â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”â”‚ App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Cache â”‚â”€â”€(async)â”€â”€â–ºâ”‚ DB â”‚â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚  batched  â”‚    â”‚â””â”€â”€â”€â”€â”€â”˜  2. ACK     â””â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”˜         (fast!)"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Very fast writes, can batch database writes for efficiency
<strong>Cons</strong>: Risk of data loss if cache fails before flushing, complex implementation</p>
<h3 id="cache-eviction-policies">Cache Eviction Policies</h3>
<p>When the cache is full, which entries should be removed?</p>



































<table><thead><tr><th>Policy</th><th>How It Works</th><th>Best For</th></tr></thead><tbody><tr><td><strong>LRU</strong> (Least Recently Used)</td><td>Evict the entry accessed longest ago</td><td>General purpose, most common</td></tr><tr><td><strong>LFU</strong> (Least Frequently Used)</td><td>Evict the entry accessed least often</td><td>Data with varying popularity</td></tr><tr><td><strong>FIFO</strong> (First In, First Out)</td><td>Evict the oldest entry</td><td>Simple, predictable</td></tr><tr><td><strong>TTL</strong> (Time to Live)</td><td>Expire entries after a fixed time</td><td>Data with known staleness tolerance</td></tr><tr><td><strong>Random</strong></td><td>Evict a random entry</td><td>Simple, good enough in many cases</td></tr></tbody></table>
<h3 id="cache-invalidation">Cache Invalidation</h3>
<p>Cache invalidation is one of the hardest problems in computer science. Common approaches:</p>






























<table><thead><tr><th>Strategy</th><th>How It Works</th><th>Trade-off</th></tr></thead><tbody><tr><td><strong>TTL-based</strong></td><td>Data expires after a set time</td><td>Simple, but stale data until expiry</td></tr><tr><td><strong>Event-driven</strong></td><td>Invalidate on write events</td><td>Fresh data, but complex to implement</td></tr><tr><td><strong>Version-based</strong></td><td>Each entry has a version number</td><td>Precise, but requires version tracking</td></tr><tr><td><strong>Purge all</strong></td><td>Clear entire cache</td><td>Simple, but cache stampede risk</td></tr></tbody></table>
<h3 id="cdn-content-delivery-network">CDN (Content Delivery Network)</h3>
<p>A CDN caches static content (images, CSS, JavaScript, videos) at edge servers distributed globally, serving content from the server closest to the user.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Without CDN:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">User (Tokyo) â”€â”€â”€â”€â”€â”€â”€â”€â”€ 200ms â”€â”€â”€â”€â”€â”€â”€â”€â”€ Origin (US East)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">With CDN:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">User (Tokyo) â”€â”€â”€â”€ 20ms â”€â”€â”€â”€ CDN Edge (Tokyo)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                  </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">(Cache MISS only)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                  </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                            </span></span><span style="--0:#d6deeb;--1:#403f53">â”€â”€ 200ms â”€â”€â”€â”€ Origin (US East)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Without CDN:User (Tokyo) â”€â”€â”€â”€â”€â”€â”€â”€â”€ 200ms â”€â”€â”€â”€â”€â”€â”€â”€â”€ Origin (US East)With CDN:User (Tokyo) â”€â”€â”€â”€ 20ms â”€â”€â”€â”€ CDN Edge (Tokyo)                                  â”‚                            (Cache MISS only)                                  â”‚                            â”€â”€ 200ms â”€â”€â”€â”€ Origin (US East)"><div></div></button></div></figure></div>
<p><strong>What to cache on CDN</strong>:</p>
<ul>
<li>Static assets (images, CSS, JS, fonts)</li>
<li>API responses that change infrequently</li>
<li>HTML pages (for static sites)</li>
<li>Video and audio streams</li>
</ul>
<p><strong>What NOT to cache on CDN</strong>:</p>
<ul>
<li>Personalized content (user-specific data)</li>
<li>Real-time data (stock prices, live scores)</li>
<li>POST/PUT/DELETE requests</li>
</ul>
<p><strong>Popular CDNs</strong>: CloudFront (AWS), Cloudflare, Fastly, Akamai</p>
<hr>
<h2 id="message-queues">Message Queues</h2>
<p>Message queues enable <strong>asynchronous communication</strong> between services. A producer sends messages to a queue, and consumers process them independently.</p>
<h3 id="why-use-message-queues">Why Use Message Queues</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Synchronous (without queue):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Client â”‚â”€â”€â–ºâ”‚ API Server â”‚â”€â”€â–ºâ”‚ Email Svc â”‚â”€â”€â–ºâ”‚ Analytics  â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚        â”‚â—„â”€â”€â”‚ (waits)    â”‚â—„â”€â”€â”‚ (slow)    â”‚â—„â”€â”€â”‚ (slow)     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Total latency: API + Email + Analytics = 500ms</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Asynchronous (with queue):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Client â”‚â”€â”€â–ºâ”‚ API Server â”‚â”€â”€â–ºâ”‚ Queue â”‚â”€â”€â–ºâ”‚ Email Svc â”‚ (processes later)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚        â”‚â—„â”€â”€â”‚ (returns)  â”‚   â”‚       â”‚â”€â”€â–ºâ”‚ Analytics â”‚ (processes later)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Total latency: API only = 50ms</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Synchronous (without queue):â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Client â”‚â”€â”€â–ºâ”‚ API Server â”‚â”€â”€â–ºâ”‚ Email Svc â”‚â”€â”€â–ºâ”‚ Analytics  â”‚â”‚        â”‚â—„â”€â”€â”‚ (waits)    â”‚â—„â”€â”€â”‚ (slow)    â”‚â—„â”€â”€â”‚ (slow)     â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Total latency: API + Email + Analytics = 500msAsynchronous (with queue):â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Client â”‚â”€â”€â–ºâ”‚ API Server â”‚â”€â”€â–ºâ”‚ Queue â”‚â”€â”€â–ºâ”‚ Email Svc â”‚ (processes later)â”‚        â”‚â—„â”€â”€â”‚ (returns)  â”‚   â”‚       â”‚â”€â”€â–ºâ”‚ Analytics â”‚ (processes later)â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Total latency: API only = 50ms"><div></div></button></div></figure></div>
<h3 id="message-queue-patterns">Message Queue Patterns</h3>
<h4 id="point-to-point-queue">Point-to-Point (Queue)</h4>
<p>Each message is consumed by exactly one consumer.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Producer â”€â”€â–º [MSG3][MSG2][MSG1] â”€â”€â–º Consumer A</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                    </span></span><span style="--0:#d6deeb;--1:#403f53">(processes MSG1)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                   </span></span><span style="--0:#d6deeb;--1:#403f53">Consumer B</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                    </span></span><span style="--0:#d6deeb;--1:#403f53">(processes MSG2)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Producer â”€â”€â–º [MSG3][MSG2][MSG1] â”€â”€â–º Consumer A                                    (processes MSG1)                                   Consumer B                                    (processes MSG2)"><div></div></button></div></figure></div>
<p><strong>Use case</strong>: Task distribution (email sending, image processing, order fulfillment).</p>
<h4 id="publish-subscribe-topic">Publish-Subscribe (Topic)</h4>
<p>Each message is delivered to all subscribers.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Publisher â”€â”€â–º [Topic: "orders"] â”€â”€â–º Subscriber A (Inventory)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                </span></span><span style="--0:#d6deeb;--1:#403f53">â”€â”€â–º Subscriber B (Analytics)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                                </span></span><span style="--0:#d6deeb;--1:#403f53">â”€â”€â–º Subscriber C (Notifications)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Publisher â”€â”€â–º [Topic: &#x22;orders&#x22;] â”€â”€â–º Subscriber A (Inventory)                                â”€â”€â–º Subscriber B (Analytics)                                â”€â”€â–º Subscriber C (Notifications)"><div></div></button></div></figure></div>
<p><strong>Use case</strong>: Event broadcasting (order placed, user signed up, payment processed).</p>
<h3 id="message-queue-technologies">Message Queue Technologies</h3>















































<table><thead><tr><th>Technology</th><th>Type</th><th>Ordering</th><th>Throughput</th><th>Best For</th></tr></thead><tbody><tr><td><strong>RabbitMQ</strong></td><td>Broker-based</td><td>Per-queue</td><td>Moderate (~50K msg/s)</td><td>Task queues, RPC, complex routing</td></tr><tr><td><strong>Apache Kafka</strong></td><td>Log-based</td><td>Per-partition</td><td>Very high (~1M msg/s)</td><td>Event streaming, log aggregation, analytics</td></tr><tr><td><strong>Amazon SQS</strong></td><td>Cloud queue</td><td>Best-effort (FIFO available)</td><td>High</td><td>Simple task queues, serverless</td></tr><tr><td><strong>Redis Streams</strong></td><td>Log-based</td><td>Per-stream</td><td>High</td><td>Lightweight streaming, real-time</td></tr><tr><td><strong>Apache Pulsar</strong></td><td>Log-based</td><td>Per-partition</td><td>Very high</td><td>Multi-tenancy, geo-replication</td></tr></tbody></table>
<h3 id="kafka-architecture-example">Kafka Architecture Example</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Producers                Kafka Cluster                    Consumers</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  Topic: "orders"      â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Order    â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Consumer     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Service  â”‚       â”‚  â”‚ Partition 0      â”‚ â”‚         â”‚ Group A      â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚ [5][4][3][2][1]  â”‚ â”‚         â”‚ (Inventory)  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Payment  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚ Partition 1      â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Consumer     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Service  â”‚       â”‚  â”‚ [4][3][2][1]     â”‚ â”‚         â”‚ Group B      â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚ (Analytics)  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚ Partition 2      â”‚ â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚ [3][2][1]        â”‚ â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Producers                Kafka Cluster                    Consumers                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  Topic: &#x22;orders&#x22;      â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Order    â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Consumer     â”‚â”‚ Service  â”‚       â”‚  â”‚ Partition 0      â”‚ â”‚         â”‚ Group A      â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚ [5][4][3][2][1]  â”‚ â”‚         â”‚ (Inventory)  â”‚                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Payment  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚ Partition 1      â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Consumer     â”‚â”‚ Service  â”‚       â”‚  â”‚ [4][3][2][1]     â”‚ â”‚         â”‚ Group B      â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚ (Analytics)  â”‚                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚ Partition 2      â”‚ â”‚                   â”‚  â”‚ [3][2][1]        â”‚ â”‚                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="handling-failures-in-message-processing">Handling Failures in Message Processing</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Retry with exponential backoff</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> time</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">process_message</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">message</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">max_retries=</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--0:#D6DEEB;--1:#403F53"> attempt </span><span style="--0:#C792EA;--1:#8D46B4">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">range</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">max_retries</span><span style="--0:#D6DEEB;--1:#403F53">):</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">try</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">result </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">handle</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">message</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#B2CCD6;--1:#097174">acknowledge</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">message</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> result</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">except</span><span style="--0:#D6DEEB;--1:#403F53"> TransientError:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">wait_time </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">**</span><span style="--0:#D6DEEB;--1:#403F53"> attempt) </span><span style="--0:#C792EA;--1:#8D46B4">+</span><span style="--0:#D6DEEB;--1:#403F53"> random.</span><span style="--0:#B2CCD6;--1:#097174">uniform</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">time.</span><span style="--0:#B2CCD6;--1:#097174">sleep</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">wait_time</span><span style="--0:#D6DEEB;--1:#403F53">)  </span><span style="--0:#809191;--1:#616671"># 1s, 2s, 4s + jitter</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">except</span><span style="--0:#D6DEEB;--1:#403F53"> PermanentError:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#B2CCD6;--1:#097174">send_to_dead_letter_queue</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">message</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">return</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671"># All retries exhausted</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#B2CCD6;--1:#097174">send_to_dead_letter_queue</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">message</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# Retry with exponential backoffimport timedef process_message(message, max_retries=3):    for attempt in range(max_retries):        try:            result = handle(message)            acknowledge(message)            return result        except TransientError:            wait_time = (2 ** attempt) + random.uniform(0, 1)            time.sleep(wait_time)  # 1s, 2s, 4s + jitter        except PermanentError:            send_to_dead_letter_queue(message)            return    # All retries exhausted    send_to_dead_letter_queue(message)"><div></div></button></div></figure></div>
<p><strong>Dead Letter Queue (DLQ)</strong>: A separate queue for messages that could not be processed after all retries. Engineers can inspect and reprocess them manually or with automated tooling.</p>
<hr>
<h2 id="rate-limiting">Rate Limiting</h2>
<p>Rate limiting controls the number of requests a client can make in a given time window, protecting systems from abuse, DDoS attacks, and cascading failures.</p>
<h3 id="common-algorithms">Common Algorithms</h3>
<h4 id="1-token-bucket">1. Token Bucket</h4>
<p>A bucket holds tokens. Each request consumes a token. Tokens are added at a fixed rate. If the bucket is empty, the request is rejected.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Bucket capacity: 10 tokens</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Refill rate: 2 tokens/second</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Time 0:  [â—â—â—â—â—â—â—â—â—â—]  10 tokens (full)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">5 requests arrive â†’ 5 tokens consumed</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Time 0:  [â—â—â—â—â—â—‹â—‹â—‹â—‹â—‹]  5 tokens remaining</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Time 1:  [â—â—â—â—â—â—â—â—‹â—‹â—‹]  7 tokens (5 + 2 refilled)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">8 requests arrive â†’ 7 allowed, 1 rejected</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Time 1:  [â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹]  0 tokens</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Time 2:  [â—â—â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹]  2 tokens (0 + 2 refilled)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Bucket capacity: 10 tokensRefill rate: 2 tokens/secondTime 0:  [â—â—â—â—â—â—â—â—â—â—]  10 tokens (full)         5 requests arrive â†’ 5 tokens consumedTime 0:  [â—â—â—â—â—â—‹â—‹â—‹â—‹â—‹]  5 tokens remainingTime 1:  [â—â—â—â—â—â—â—â—‹â—‹â—‹]  7 tokens (5 + 2 refilled)         8 requests arrive â†’ 7 allowed, 1 rejectedTime 1:  [â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹]  0 tokensTime 2:  [â—â—â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹]  2 tokens (0 + 2 refilled)"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Allows bursts up to bucket size, smooth rate limiting
<strong>Cons</strong>: Requires per-user state</p>
<h4 id="2-sliding-window-log">2. Sliding Window Log</h4>
<p>Track timestamps of all requests. Count requests in the current window.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Window: 1 minute, Limit: 5 requests</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Request log for User A:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[10:00:15, 10:00:22, 10:00:45, 10:00:51, 10:00:58]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">10:01:05 â†’ Window = [10:00:05, 10:01:05]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">Requests in window: 4 (10:00:22, 10:00:45, 10:00:51, 10:00:58)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">â†’ ALLOWED (4 &#x3C; 5)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">10:01:10 â†’ Window = [10:00:10, 10:01:10]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">Requests in window: 5</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">â†’ REJECTED (5 >= 5)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Window: 1 minute, Limit: 5 requestsRequest log for User A:[10:00:15, 10:00:22, 10:00:45, 10:00:51, 10:00:58]10:01:05 â†’ Window = [10:00:05, 10:01:05]           Requests in window: 4 (10:00:22, 10:00:45, 10:00:51, 10:00:58)           â†’ ALLOWED (4 < 5)10:01:10 â†’ Window = [10:00:10, 10:01:10]           Requests in window: 5           â†’ REJECTED (5 >= 5)"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Very accurate, no boundary issues
<strong>Cons</strong>: Memory-intensive (stores all timestamps)</p>
<h4 id="3-fixed-window-counter">3. Fixed Window Counter</h4>
<p>Divide time into fixed windows and count requests per window.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Limit: 100 requests per minute</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Window [10:00 - 10:01]: 85 requests  â†’ all allowed</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Window [10:01 - 10:02]: 100 requests â†’ all allowed</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Window [10:01 - 10:02]: request 101  â†’ REJECTED</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Problem: 85 requests at 10:00:59 + 100 at 10:01:01</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">= 185 requests in 2 seconds! (boundary issue)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Limit: 100 requests per minuteWindow [10:00 - 10:01]: 85 requests  â†’ all allowedWindow [10:01 - 10:02]: 100 requests â†’ all allowedWindow [10:01 - 10:02]: request 101  â†’ REJECTEDProblem: 85 requests at 10:00:59 + 100 at 10:01:01         = 185 requests in 2 seconds! (boundary issue)"><div></div></button></div></figure></div>
<p><strong>Pros</strong>: Simple, low memory
<strong>Cons</strong>: Boundary issue allows 2x burst at window edges</p>
<h3 id="rate-limiting-implementation-with-redis">Rate Limiting Implementation with Redis</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> redis</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> time</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">r </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> redis.</span><span style="--0:#B2CCD6;--1:#097174">Redis</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">sliding_window_rate_limit</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">redis_client</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">user_id</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">limit=</span><span style="--0:#F78C6C;--1:#AA0982">100</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">window=</span><span style="--0:#F78C6C;--1:#AA0982">60</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">"""</span><span style="--0:#ECC48D;--1:#9B504E">Rate limit using sliding window with atomic Lua script.</span><span style="--0:#D9F5DD;--1:#111111">"""</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">key </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">f</span><span style="--0:#ECC48D;--1:#9B504E">"rate_limit:</span><span style="--0:#82AAFF;--1:#3C63B3">{</span><span style="--0:#D6DEEB;--1:#403F53">user_id</span><span style="--0:#82AAFF;--1:#3C63B3">}</span><span style="--0:#ECC48D;--1:#9B504E">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">now </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> time.</span><span style="--0:#B2CCD6;--1:#097174">time</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671"># Lua script for atomic rate limiting</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">lua_script </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"""</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">local key = KEYS[1]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">local now = tonumber(ARGV[1])</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">local window = tonumber(ARGV[2])</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">local limit = tonumber(ARGV[3])</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">redis.call('ZREMRANGEBYSCORE', key, 0, now - window)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">local count = redis.call('ZCARD', key)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">if count &#x3C; limit then</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">        </span></span><span style="--0:#ECC48D;--1:#9B504E">redis.call('ZADD', key, now, now .. '-' .. math.random())</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">        </span></span><span style="--0:#ECC48D;--1:#9B504E">redis.call('EXPIRE', key, math.ceil(window))</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">        </span></span><span style="--0:#ECC48D;--1:#9B504E">return 1</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">else</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">        </span></span><span style="--0:#ECC48D;--1:#9B504E">return 0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#9B504E">    </span></span><span style="--0:#ECC48D;--1:#9B504E">end</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D9F5DD;--1:#111111">"""</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">allowed </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> redis_client.</span><span style="--0:#B2CCD6;--1:#097174">eval</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">lua_script</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> key</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> now</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> window</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> limit</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">bool</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">allowed</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Usage</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">not</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">sliding_window_rate_limit</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3C63B3">r</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">user_123</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">):</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">HttpResponse</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">status</span></span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#F78C6C;--1:#AA0982">429</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#D7DBE0;--1:#403F53">body</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Too Many Requests</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import redisimport timer = redis.Redis()def sliding_window_rate_limit(redis_client, user_id, limit=100, window=60):    &#x22;&#x22;&#x22;Rate limit using sliding window with atomic Lua script.&#x22;&#x22;&#x22;    key = f&#x22;rate_limit:{user_id}&#x22;    now = time.time()    # Lua script for atomic rate limiting    lua_script = &#x22;&#x22;&#x22;    local key = KEYS[1]    local now = tonumber(ARGV[1])    local window = tonumber(ARGV[2])    local limit = tonumber(ARGV[3])    redis.call(&#x27;ZREMRANGEBYSCORE&#x27;, key, 0, now - window)    local count = redis.call(&#x27;ZCARD&#x27;, key)    if count < limit then        redis.call(&#x27;ZADD&#x27;, key, now, now .. &#x27;-&#x27; .. math.random())        redis.call(&#x27;EXPIRE&#x27;, key, math.ceil(window))        return 1    else        return 0    end    &#x22;&#x22;&#x22;    allowed = redis_client.eval(lua_script, 1, key, now, window, limit)    return bool(allowed)# Usageif not sliding_window_rate_limit(r, &#x22;user_123&#x22;):    return HttpResponse(status=429, body=&#x22;Too Many Requests&#x22;)"><div></div></button></div></figure></div>
<h3 id="rate-limiting-response-headers">Rate Limiting Response Headers</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="http"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">HTTP</span><span style="--0:#D6DEEB;--1:#403F53">/</span><span style="--0:#F78C6C;--1:#AA0982">1.1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">429</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">Too Many Requests</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#CAECE6">X-RateLimit-Limit</span><span style="--0:#C792EA">:</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">100</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#CAECE6">X-RateLimit-Remaining</span><span style="--0:#C792EA">:</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">0</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#CAECE6">X-RateLimit-Reset</span><span style="--0:#C792EA">:</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">1700000060</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#CAECE6">Retry-After</span><span style="--0:#C792EA">:</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">30</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="HTTP/1.1 429 Too Many RequestsX-RateLimit-Limit: 100X-RateLimit-Remaining: 0X-RateLimit-Reset: 1700000060Retry-After: 30"><div></div></button></div></figure></div>
<hr>
<h2 id="database-scaling-patterns">Database Scaling Patterns</h2>
<h3 id="pattern-1-read-replicas-with-writeread-splitting">Pattern 1: Read Replicas with Write/Read Splitting</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                   Application                       â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                                                     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚   Write queries â”€â”€â”€â”€â”€â”€â–º  Primary DB                 â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                          (single writer)            â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                              â”‚                      â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                    â–¼         â–¼          â–¼           â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚   Read queries â”€â”€â–º Replica 1  Replica 2  Replica 3 â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                                                     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                   Application                       â”‚â”‚                                                     â”‚â”‚   Write queries â”€â”€â”€â”€â”€â”€â–º  Primary DB                 â”‚â”‚                          (single writer)            â”‚â”‚                              â”‚                      â”‚â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚â”‚                    â–¼         â–¼          â–¼           â”‚â”‚   Read queries â”€â”€â–º Replica 1  Replica 2  Replica 3 â”‚â”‚                                                     â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="pattern-2-cqrs-command-query-responsibility-segregation">Pattern 2: CQRS (Command Query Responsibility Segregation)</h3>
<p>Separate the read model from the write model entirely.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Commands (Writes)                 Queries (Reads)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                                 â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼                                 â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Command  â”‚                    â”‚  Query       â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Handler  â”‚                    â”‚  Handler     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                                 â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼                                 â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Sync/Async      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Write DB â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Read DB       â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ (Postgres)â”‚   (event stream)  â”‚ (Elasticsearchâ”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚          â”‚                    â”‚  or Redis)    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Commands (Writes)                 Queries (Reads)     â”‚                                 â”‚     â–¼                                 â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Command  â”‚                    â”‚  Query       â”‚â”‚ Handler  â”‚                    â”‚  Handler     â”‚â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                 â”‚     â–¼                                 â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Sync/Async      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Write DB â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Read DB       â”‚â”‚ (Postgres)â”‚   (event stream)  â”‚ (Elasticsearchâ”‚â”‚          â”‚                    â”‚  or Redis)    â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<p><strong>When to use CQRS</strong>: When read and write patterns are very different (e.g., simple writes but complex search queries), or when you need to scale reads and writes independently.</p>
<h3 id="pattern-3-database-per-service-microservices">Pattern 3: Database per Service (Microservices)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  User Service â”‚  â”‚ Order Serviceâ”‚  â”‚Product Serviceâ”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚              â”‚  â”‚              â”‚  â”‚              â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚PostgreSQLâ”‚ â”‚  â”‚  â”‚  MySQL  â”‚ â”‚  â”‚  â”‚ MongoDB â”‚ â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚ (users)  â”‚ â”‚  â”‚  â”‚(orders) â”‚ â”‚  â”‚  â”‚(products)â”‚ â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  User Service â”‚  â”‚ Order Serviceâ”‚  â”‚Product Serviceâ”‚â”‚              â”‚  â”‚              â”‚  â”‚              â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚  â”‚PostgreSQLâ”‚ â”‚  â”‚  â”‚  MySQL  â”‚ â”‚  â”‚  â”‚ MongoDB â”‚ â”‚â”‚  â”‚ (users)  â”‚ â”‚  â”‚  â”‚(orders) â”‚ â”‚  â”‚  â”‚(products)â”‚ â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<p>Each microservice owns its own database. Services communicate through APIs or events, never by sharing databases directly.</p>
<p><strong>Benefits</strong>: Independent scaling, technology freedom, fault isolation
<strong>Challenges</strong>: Distributed transactions, data consistency across services, join queries across services</p>
<hr>
<h2 id="microservices-patterns">Microservices Patterns</h2>
<h3 id="api-gateway">API Gateway</h3>
<p>A single entry point that routes requests to the appropriate microservice.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚   API Gateway     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Mobile App â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  - Authentication â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Web App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  - Rate Limiting  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  - Routing        â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3rd Party â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  - SSL Terminationâ”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  - Request/Responseâ”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚    Transformation â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                       </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚   â”‚   â”‚   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼              â–¼   â–¼              â–¼</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚ User  â”‚    â”‚ Order â”‚ â”‚Productâ”‚  â”‚Paymentâ”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  Svc  â”‚    â”‚  Svc  â”‚ â”‚  Svc  â”‚  â”‚  Svc  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   API Gateway     â”‚Mobile App â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                    â”‚  - Authentication â”‚Web App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  - Rate Limiting  â”‚                    â”‚  - Routing        â”‚3rd Party â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  - SSL Terminationâ”‚                    â”‚  - Request/Responseâ”‚                    â”‚    Transformation â”‚                    â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜                       â”‚   â”‚   â”‚   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â–¼              â–¼   â–¼              â–¼        â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”‚ User  â”‚    â”‚ Order â”‚ â”‚Productâ”‚  â”‚Paymentâ”‚        â”‚  Svc  â”‚    â”‚  Svc  â”‚ â”‚  Svc  â”‚  â”‚  Svc  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="circuit-breaker">Circuit Breaker</h3>
<p>Prevents cascading failures by stopping requests to a failing service.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">States:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">CLOSED â”€â”€(failures exceed threshold)â”€â”€â–º OPEN</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â–²                                       â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                                  (timeout)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                                       â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€(success)â”€â”€â”€â”€ HALF-OPEN â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">(allow limited requests)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">CLOSED:    Requests flow normally. Failures are counted.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">OPEN:      All requests fail immediately. No calls to downstream.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">HALF-OPEN: Allow a few test requests. If they succeed, go to CLOSED.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">If they fail, go back to OPEN.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="States:  CLOSED â”€â”€(failures exceed threshold)â”€â”€â–º OPEN     â–²                                       â”‚     â”‚                                  (timeout)     â”‚                                       â”‚     â””â”€â”€(success)â”€â”€â”€â”€ HALF-OPEN â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    (allow limited requests)CLOSED:    Requests flow normally. Failures are counted.OPEN:      All requests fail immediately. No calls to downstream.HALF-OPEN: Allow a few test requests. If they succeed, go to CLOSED.           If they fail, go back to OPEN."><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> time</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> enum </span><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> Enum</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">CircuitState</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">Enum</span><span style="--0:#D6DEEB;--1:#403F53">):</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">CLOSED</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">closed</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">OPEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">open</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3C63B3">HALF_OPEN</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">half_open</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">CircuitBreaker</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">__init__</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">self</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">failure_threshold=</span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">recovery_timeout=</span><span style="--0:#F78C6C;--1:#AA0982">30</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.state </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> CircuitState.</span><span style="--0:#82AAFF;--1:#3C63B3">CLOSED</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_count </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_threshold </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> failure_threshold</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.recovery_timeout </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> recovery_timeout</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.last_failure_time </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF5874;--1:#A54A4A">None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">call</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">self</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">func</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">*args</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">**kwargs</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.state </span><span style="--0:#C792EA;--1:#8D46B4">==</span><span style="--0:#D6DEEB;--1:#403F53"> CircuitState.</span><span style="--0:#82AAFF;--1:#3C63B3">OPEN</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> time.</span><span style="--0:#B2CCD6;--1:#097174">time</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8D46B4">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.last_failure_time </span><span style="--0:#C792EA;--1:#8D46B4">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.recovery_timeout:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.state </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> CircuitState.</span><span style="--0:#82AAFF;--1:#3C63B3">HALF_OPEN</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8D46B4">raise</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">CircuitOpenError</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Circuit is OPEN, failing fast</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">try</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">result </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#097174">func</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">*</span><span style="--0:#82AAFF;--1:#3C63B3">args</span><span style="--0:#D9F5DD;--1:#111111">,</span><span style="--0:#82AAFF;--1:#3C63B3"> </span><span style="--0:#7FDBCA;--1:#097174">**</span><span style="--0:#82AAFF;--1:#3C63B3">kwargs</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#B2CCD6;--1:#097174">_on_success</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> result</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">except</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">Exception</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">as</span><span style="--0:#D6DEEB;--1:#403F53"> e:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#B2CCD6;--1:#097174">_on_failure</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8D46B4">raise</span><span style="--0:#D6DEEB;--1:#403F53"> e</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">_on_success</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_count </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.state </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> CircuitState.</span><span style="--0:#82AAFF;--1:#3C63B3">CLOSED</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8D46B4">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">_on_failure</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_count </span><span style="--0:#C792EA;--1:#8D46B4">+=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.last_failure_time </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> time.</span><span style="--0:#B2CCD6;--1:#097174">time</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_count </span><span style="--0:#C792EA;--1:#8D46B4">>=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.failure_threshold:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.state </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> CircuitState.</span><span style="--0:#82AAFF;--1:#3C63B3">OPEN</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import timefrom enum import Enumclass CircuitState(Enum):    CLOSED = &#x22;closed&#x22;    OPEN = &#x22;open&#x22;    HALF_OPEN = &#x22;half_open&#x22;class CircuitBreaker:    def __init__(self, failure_threshold=5, recovery_timeout=30):        self.state = CircuitState.CLOSED        self.failure_count = 0        self.failure_threshold = failure_threshold        self.recovery_timeout = recovery_timeout        self.last_failure_time = None    def call(self, func, *args, **kwargs):        if self.state == CircuitState.OPEN:            if time.time() - self.last_failure_time > self.recovery_timeout:                self.state = CircuitState.HALF_OPEN            else:                raise CircuitOpenError(&#x22;Circuit is OPEN, failing fast&#x22;)        try:            result = func(*args, **kwargs)            self._on_success()            return result        except Exception as e:            self._on_failure()            raise e    def _on_success(self):        self.failure_count = 0        self.state = CircuitState.CLOSED    def _on_failure(self):        self.failure_count += 1        self.last_failure_time = time.time()        if self.failure_count >= self.failure_threshold:            self.state = CircuitState.OPEN"><div></div></button></div></figure></div>
<h3 id="service-discovery">Service Discovery</h3>
<p>How do services find each other in a dynamic environment?</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Client-Side Discovery:</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   1. Query   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Service â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Service    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚   A     â”‚               â”‚  Registry    â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Consul/etcd)â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚  2. Addresses â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚  3. Direct call to chosen instance</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚         â”‚               â”‚Service B â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚Instance 2â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                          </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Server-Side Discovery:</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Service â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Load     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Service B â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚   A     â”‚              â”‚  Balancer  â”‚         â”‚Instance 1â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                         </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  (queries  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                         </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  registry  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Service B â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                         </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  internally)â”‚        â”‚Instance 2â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                         </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Client-Side Discovery:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   1. Query   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Service â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Service    â”‚â”‚   A     â”‚               â”‚  Registry    â”‚â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Consul/etcd)â”‚â”‚         â”‚  2. Addresses â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚         â”‚â”‚         â”‚  3. Direct call to chosen instanceâ”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚         â”‚               â”‚Service B â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚Instance 2â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜Server-Side Discovery:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Service â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Load     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Service B â”‚â”‚   A     â”‚              â”‚  Balancer  â”‚         â”‚Instance 1â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  (queries  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  registry  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Service B â”‚                         â”‚  internally)â”‚        â”‚Instance 2â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<hr>
<h2 id="real-world-scaling-example-from-0-to-millions">Real-World Scaling Example: From 0 to Millions</h2>
<h3 id="stage-1-single-server-0-1k-users">Stage 1: Single Server (0-1K users)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Single Server         â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚                      â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚  App   â”‚          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚      â”‚               â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚   DB   â”‚          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Single Server         â”‚â”‚                      â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚  â”‚  App   â”‚          â”‚â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚â”‚      â”‚               â”‚â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚â”‚  â”‚   DB   â”‚          â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="stage-2-separate-db-1k-10k-users">Stage 2: Separate DB (1K-10K users)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ App Server â”‚â”€â”€â”€â”€â”€â–ºâ”‚ Database   â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚            â”‚      â”‚ Server     â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ App Server â”‚â”€â”€â”€â”€â”€â–ºâ”‚ Database   â”‚â”‚            â”‚      â”‚ Server     â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="stage-3-add-cache-and-load-balancer-10k-100k-users">Stage 3: Add Cache and Load Balancer (10K-100K users)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">              </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â–ºâ”‚ App Srv 1  â”‚â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ LB â”‚â”€â”€â”€â”¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”œâ”€â”€â”€â–ºâ”‚ Redis â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚    â”‚   â”œâ”€â”€â”€â–ºâ”‚ App Srv 2  â”‚â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”˜   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â””â”€â”€â”€â–ºâ”‚  DB   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">              </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚ App Srv 3  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">              </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â–ºâ”‚ App Srv 1  â”‚â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚ LB â”‚â”€â”€â”€â”¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”œâ”€â”€â”€â–ºâ”‚ Redis â”‚â”‚    â”‚   â”œâ”€â”€â”€â–ºâ”‚ App Srv 2  â”‚â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â””â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â””â”€â”€â”€â–ºâ”‚  DB   â”‚              â”‚ App Srv 3  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”˜"><div></div></button></div></figure></div>
<h3 id="stage-4-read-replicas-cdn-mq-100k-1m-users">Stage 4: Read Replicas, CDN, MQ (100K-1M users)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">             </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Users â”€â”€â”€â”€â”€â”€â–ºâ”‚ CDN â”‚ (static content)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">             </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”¬â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚ (dynamic requests)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  L7 LB â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">           </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">         </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼     â–¼      â–¼</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚App â”‚â”‚App â”‚â”‚App â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚ 1  â”‚â”‚ 2  â”‚â”‚ 3  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”¬â”€â”€â”˜â””â”€â”¬â”€â”€â”˜â””â”€â”¬â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">        </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚     â”‚     â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                      â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼                      â–¼</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚ Redis â”‚          â”‚ DB Primaryâ”‚â”€â”€â”€â”€â–ºâ”‚ DB Replica 1 â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â”‚Clusterâ”‚          â”‚          â”‚â”€â”€â”€â”€â–ºâ”‚ DB Replica 2 â”‚</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                        </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  Kafka  â”‚â”€â”€â–º Analytics</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  Queue  â”‚â”€â”€â–º Notifications</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                   </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â–º Search indexing</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="             â”Œâ”€â”€â”€â”€â”€â”Users â”€â”€â”€â”€â”€â”€â–ºâ”‚ CDN â”‚ (static content)             â””â”€â”€â”¬â”€â”€â”˜                â”‚ (dynamic requests)                â–¼           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  L7 LB â”‚           â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”         â–¼     â–¼      â–¼      â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”      â”‚App â”‚â”‚App â”‚â”‚App â”‚      â”‚ 1  â”‚â”‚ 2  â”‚â”‚ 3  â”‚      â””â”€â”¬â”€â”€â”˜â””â”€â”¬â”€â”€â”˜â””â”€â”¬â”€â”€â”˜        â”‚     â”‚     â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”‚                      â”‚   â–¼                      â–¼â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Redis â”‚          â”‚ DB Primaryâ”‚â”€â”€â”€â”€â–ºâ”‚ DB Replica 1 â”‚â”‚Clusterâ”‚          â”‚          â”‚â”€â”€â”€â”€â–ºâ”‚ DB Replica 2 â”‚â””â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                   â”‚  Kafka  â”‚â”€â”€â–º Analytics                   â”‚  Queue  â”‚â”€â”€â–º Notifications                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â–º Search indexing"><div></div></button></div></figure></div>
<h3 id="stage-5-sharding-multi-region-1m-users">Stage 5: Sharding, Multi-Region (1M+ users)</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">Global DNS (GeoDNS)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â–¼                â–¼</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  US Region   â”‚  â”‚  EU Region   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚              â”‚  â”‚              â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚CDN Edgeâ”‚  â”‚  â”‚  â”‚CDN Edgeâ”‚  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚      â–¼       â”‚  â”‚      â–¼       â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚  LB    â”‚  â”‚  â”‚  â”‚  LB    â”‚  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚App x Nâ”‚   â”‚  â”‚  â”‚App x Nâ”‚   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚Shard 1â”‚   â”‚  â”‚  â”‚Shard 3â”‚   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â”‚Shard 2â”‚   â”‚  â”‚  â”‚Shard 4â”‚   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">            </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â”‚                â”‚</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                    </span></span><span style="--0:#d6deeb;--1:#403f53">â””â”€â”€â”€â”€ Cross-region</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">                         </span></span><span style="--0:#d6deeb;--1:#403f53">replication</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="                    Global DNS (GeoDNS)                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                    â–¼                â–¼            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  US Region   â”‚  â”‚  EU Region   â”‚            â”‚              â”‚  â”‚              â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚  â”‚CDN Edgeâ”‚  â”‚  â”‚  â”‚CDN Edgeâ”‚  â”‚            â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚      â–¼       â”‚  â”‚      â–¼       â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚  â”‚  LB    â”‚  â”‚  â”‚  â”‚  LB    â”‚  â”‚            â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚            â”‚  â”‚App x Nâ”‚   â”‚  â”‚  â”‚App x Nâ”‚   â”‚            â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚            â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚            â”‚  â”‚Shard 1â”‚   â”‚  â”‚  â”‚Shard 3â”‚   â”‚            â”‚  â”‚Shard 2â”‚   â”‚  â”‚  â”‚Shard 4â”‚   â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                â”‚                    â””â”€â”€â”€â”€ Cross-region                         replication"><div></div></button></div></figure></div>
<hr>
<h2 id="summary">Summary</h2>
<div class="card-grid astro-zntqmydn"><article class="card sl-flex astro-v5tidmuc"> <p class="title sl-flex astro-v5tidmuc"> <svg aria-hidden="true" class="icon astro-v5tidmuc astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path fill-rule="evenodd" d="M1.44 8.855v-.001l3.527-3.516c.34-.344.802-.541 1.285-.548h6.649l.947-.947c3.07-3.07 6.207-3.072 7.62-2.868a1.821 1.821 0 0 1 1.557 1.557c.204 1.413.203 4.55-2.868 7.62l-.946.946v6.649a1.845 1.845 0 0 1-.549 1.286l-3.516 3.528a1.844 1.844 0 0 1-3.11-.944l-.858-4.275-4.52-4.52-2.31-.463-1.964-.394A1.847 1.847 0 0 1 .98 10.693a1.843 1.843 0 0 1 .46-1.838Zm5.379 2.017-3.873-.776L6.32 6.733h4.638l-4.14 4.14Zm8.403-5.655c2.459-2.46 4.856-2.463 5.89-2.33.134 1.035.13 3.432-2.329 5.891l-6.71 6.71-3.561-3.56 6.71-6.711Zm-1.318 15.837-.776-3.873 4.14-4.14v4.639l-3.364 3.374Z" clip-rule="evenodd"/><path d="M9.318 18.345a.972.972 0 0 0-1.86-.561c-.482 1.435-1.687 2.204-2.934 2.619a8.22 8.22 0 0 1-1.23.302c.062-.365.157-.79.303-1.229.415-1.247 1.184-2.452 2.62-2.935a.971.971 0 1 0-.62-1.842c-.12.04-.236.084-.35.13-2.02.828-3.012 2.588-3.493 4.033a10.383 10.383 0 0 0-.51 2.845l-.001.016v.063c0 .536.434.972.97.972H2.24a7.21 7.21 0 0 0 .878-.065c.527-.063 1.248-.19 2.02-.447 1.445-.48 3.205-1.472 4.033-3.494a5.828 5.828 0 0 0 .147-.407Z"/></svg>  <span class="astro-v5tidmuc">Scaling Strategy</span> </p> <div class="body astro-v5tidmuc"><p>Start with vertical scaling. Add a load balancer and horizontal scaling when you outgrow a single server. Use auto-scaling for unpredictable traffic. Scale your database with read replicas first, then sharding.</p></div> </article> <article class="card sl-flex astro-v5tidmuc"> <p class="title sl-flex astro-v5tidmuc"> <svg aria-hidden="true" class="icon astro-v5tidmuc astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M22 9.67a1 1 0 0 0-.86-.67l-5.69-.83L12.9 3a1 1 0 0 0-1.8 0L8.55 8.16 2.86 9a1 1 0 0 0-.81.68 1 1 0 0 0 .25 1l4.13 4-1 5.68a1 1 0 0 0 1.45 1.07L12 18.76l5.1 2.68c.14.08.3.12.46.12a1 1 0 0 0 .99-1.19l-1-5.68 4.13-4A1 1 0 0 0 22 9.67Zm-6.15 4a1 1 0 0 0-.29.89l.72 4.19-3.76-2a1 1 0 0 0-.94 0l-3.76 2 .72-4.19a1 1 0 0 0-.29-.89l-3-3 4.21-.61a1 1 0 0 0 .76-.55L12 5.7l1.88 3.82a1 1 0 0 0 .76.55l4.21.61-3 2.99Z"/></svg>  <span class="astro-v5tidmuc">Caching</span> </p> <div class="body astro-v5tidmuc"><p>Cache at every layer: browser, CDN, application, database. Use cache-aside for most cases. Set appropriate TTLs. Plan for cache invalidation from day one. Monitor hit rates.</p></div> </article> <article class="card sl-flex astro-v5tidmuc"> <p class="title sl-flex astro-v5tidmuc"> <svg aria-hidden="true" class="icon astro-v5tidmuc astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="m21.32 9.55-1.89-.63.89-1.78A1 1 0 0 0 20.13 6L18 3.87a1 1 0 0 0-1.15-.19l-1.78.89-.63-1.89A1 1 0 0 0 13.5 2h-3a1 1 0 0 0-.95.68l-.63 1.89-1.78-.89A1 1 0 0 0 6 3.87L3.87 6a1 1 0 0 0-.19 1.15l.89 1.78-1.89.63a1 1 0 0 0-.68.94v3a1 1 0 0 0 .68.95l1.89.63-.89 1.78A1 1 0 0 0 3.87 18L6 20.13a1 1 0 0 0 1.15.19l1.78-.89.63 1.89a1 1 0 0 0 .95.68h3a1 1 0 0 0 .95-.68l.63-1.89 1.78.89a1 1 0 0 0 1.13-.19L20.13 18a1 1 0 0 0 .19-1.15l-.89-1.78 1.89-.63a1 1 0 0 0 .68-.94v-3a1 1 0 0 0-.68-.95ZM20 12.78l-1.2.4A2 2 0 0 0 17.64 16l.57 1.14-1.1 1.1-1.11-.6a2 2 0 0 0-2.79 1.16l-.4 1.2h-1.59l-.4-1.2A2 2 0 0 0 8 17.64l-1.14.57-1.1-1.1.6-1.11a2 2 0 0 0-1.16-2.82l-1.2-.4v-1.56l1.2-.4A2 2 0 0 0 6.36 8l-.57-1.11 1.1-1.1L8 6.36a2 2 0 0 0 2.82-1.16l.4-1.2h1.56l.4 1.2A2 2 0 0 0 16 6.36l1.14-.57 1.1 1.1-.6 1.11a2 2 0 0 0 1.16 2.79l1.2.4v1.59ZM12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z"/></svg>  <span class="astro-v5tidmuc">Message Queues</span> </p> <div class="body astro-v5tidmuc"><p>Use queues to decouple services, handle traffic spikes, and enable async processing. Kafka for event streaming, RabbitMQ for task queues, SQS for simple cloud queues. Always implement dead letter queues.</p></div> </article> <article class="card sl-flex astro-v5tidmuc"> <p class="title sl-flex astro-v5tidmuc"> <svg aria-hidden="true" class="icon astro-v5tidmuc astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M18.71 7.21a1 1 0 0 0-1.42 0l-7.45 7.46-3.13-3.14A1.02 1.02 0 1 0 5.29 13l3.84 3.84a1.001 1.001 0 0 0 1.42 0l8.16-8.16a1 1 0 0 0 0-1.47Z"/></svg>  <span class="astro-v5tidmuc">Resilience</span> </p> <div class="body astro-v5tidmuc"><p>Rate limiting protects your system from abuse. Circuit breakers prevent cascading failures. Health checks enable automatic recovery. Design for failure â€” it is not a question of if, but when.</p></div> </article> </div>  </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links astro-u2l5gyhi" dir="ltr"> <a href="/software-engineering/system-design/databases" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Databases</span> </span> </a> <a href="/software-engineering/system-design/case-studies" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Case Studies</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>