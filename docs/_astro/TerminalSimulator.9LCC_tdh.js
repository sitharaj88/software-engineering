import{j as o}from"./jsx-runtime.ClP7wGfN.js";import{r as y}from"./index.DK-fsZOb.js";import{A as te}from"./index.CMzh-1wI.js";import{m as L}from"./proxy.i6brGrIQ.js";function re(d=640){const[f,b]=y.useState(!1);return y.useEffect(()=>{const u=window.matchMedia(`(max-width: ${d}px)`);b(u.matches);const T=P=>b(P.matches);return u.addEventListener("change",T),()=>u.removeEventListener("change",T)},[d]),f}function Y(){return{type:"dir",name:"/",permissions:"drwxr-xr-x",children:{home:{type:"dir",name:"home",permissions:"drwxr-xr-x",children:{user:{type:"dir",name:"user",permissions:"drwxr-xr-x",children:{"README.md":{type:"file",name:"README.md",permissions:"-rw-r--r--",content:`# Welcome to the Terminal Simulator

This is a simulated Linux terminal for learning.
Try running \`help\` to see available commands.`},"notes.txt":{type:"file",name:"notes.txt",permissions:"-rw-r--r--",content:`Remember to study:
- File permissions
- Directory navigation
- File manipulation commands`},"hello.sh":{type:"file",name:"hello.sh",permissions:"-rwxr-xr-x",content:`#!/bin/bash
echo "Hello, World!"`},projects:{type:"dir",name:"projects",permissions:"drwxr-xr-x",children:{"app.js":{type:"file",name:"app.js",permissions:"-rw-r--r--",content:`const express = require("express");
const app = express();
app.get("/", (req, res) => res.send("Hello!"));
app.listen(3000);`},"index.html":{type:"file",name:"index.html",permissions:"-rw-r--r--",content:`<!DOCTYPE html>
<html>
<head><title>My Page</title></head>
<body>
  <h1>Hello World</h1>
</body>
</html>`},"style.css":{type:"file",name:"style.css",permissions:"-rw-r--r--",content:`body {
  font-family: sans-serif;
  margin: 0;
  padding: 20px;
}`}}},documents:{type:"dir",name:"documents",permissions:"drwxr-xr-x",children:{"report.txt":{type:"file",name:"report.txt",permissions:"-rw-r--r--",content:`Quarterly Report Q4 2024

Revenue: $1.2M
Expenses: $800K
Profit: $400K`},"todo.txt":{type:"file",name:"todo.txt",permissions:"-rw-r--r--",content:`1. Learn terminal commands
2. Practice file navigation
3. Understand permissions
4. Master grep and pipes`}}}}}}},etc:{type:"dir",name:"etc",permissions:"drwxr-xr-x",children:{hostname:{type:"file",name:"hostname",permissions:"-rw-r--r--",content:"learn-terminal"},passwd:{type:"file",name:"passwd",permissions:"-rw-r--r--",content:`root:x:0:0:root:/root:/bin/bash
user:x:1000:1000:User:/home/user:/bin/bash`}}},tmp:{type:"dir",name:"tmp",permissions:"drwxrwxrwt",children:{}},var:{type:"dir",name:"var",permissions:"drwxr-xr-x",children:{log:{type:"dir",name:"log",permissions:"drwxr-xr-x",children:{syslog:{type:"file",name:"syslog",permissions:"-rw-r-----",content:`Jan  1 00:00:01 learn-terminal systemd[1]: Started Session.
Jan  1 00:00:02 learn-terminal kernel: [0.000000] Linux version 5.15.0`}}}}}}}}const S=[{instruction:"Print the current working directory using `pwd`",hint:"Type: pwd",validate:d=>d.trim()==="pwd"},{instruction:"List files in the current directory using `ls`",hint:"Type: ls",validate:d=>d.trim().startsWith("ls")},{instruction:"Read the contents of README.md using `cat`",hint:"Type: cat README.md",validate:d=>d.trim().startsWith("cat")&&d.includes("README")},{instruction:"Create a new directory called `myproject`",hint:"Type: mkdir myproject",validate:d=>d.trim().startsWith("mkdir")},{instruction:"Change into the `projects` directory",hint:"Type: cd projects",validate:d=>d.trim().startsWith("cd")&&d.includes("projects")},{instruction:"List files in the projects directory to see what is there",hint:"Type: ls",validate:d=>d.trim().startsWith("ls")},{instruction:"Create a new file called `server.py` using `touch`",hint:"Type: touch server.py",validate:d=>d.trim().startsWith("touch")},{instruction:"Go back to the parent directory using `cd ..`",hint:"Type: cd ..",validate:d=>d.trim()==="cd .."},{instruction:'Search for the word "Hello" in all files using `grep`',hint:"Type: grep Hello *",validate:d=>d.trim().startsWith("grep")},{instruction:"Display your username with `whoami`",hint:"Type: whoami",validate:d=>d.trim()==="whoami"}];function ce(){const d=re(),[f,b]=y.useState(Y),[u,T]=y.useState("/home/user"),[P,D]=y.useState([{command:"",output:"Welcome to the Terminal Simulator! Type `help` to see available commands.\n"}]),[N,W]=y.useState(""),[R,Q]=y.useState([]),[ne,I]=y.useState(-1),[j,G]=y.useState(!1),[E,z]=y.useState(0),[F,M]=y.useState(!1),[B,H]=y.useState([]),A=y.useRef(null),O=y.useRef(null),w=y.useCallback((n,s)=>{if(n.startsWith("/"))return"/"+n.split("/").filter(Boolean).join("/");const a=s.split("/").filter(Boolean),x=n.split("/").filter(Boolean);for(const e of x)e===".."?a.pop():e!=="."&&a.push(e);return"/"+a.join("/")},[]),g=y.useCallback((n,s)=>{if(n==="/")return s;const a=n.split("/").filter(Boolean);let x=s;for(const e of a){if(x.type!=="dir"||!x.children?.[e])return null;x=x.children[e]}return x},[]),C=y.useCallback((n,s)=>{const a=n.split("/").filter(Boolean);if(a.length===0)return null;const x=a.pop(),e="/"+a.join("/"),r=g(e,s);return!r||r.type!=="dir"?null:{parent:r,name:x}},[g]),v=y.useCallback(n=>{const s={...n};if(n.children){s.children={};for(const[a,x]of Object.entries(n.children))s.children[a]=v(x)}return s},[]),U=y.useCallback(n=>{const s=n.trim();if(!s)return{output:""};const a=s.split(/\s+/),x=a[0],e=a.slice(1);switch(x){case"help":return{output:`Available commands:
  ls [dir]       - List directory contents
  cd <dir>       - Change directory
  pwd            - Print working directory
  cat <file>     - Display file contents
  mkdir <dir>    - Create directory
  touch <file>   - Create empty file
  rm <file/dir>  - Remove file or directory
  cp <src> <dst> - Copy file
  mv <src> <dst> - Move/rename file
  echo <text>    - Print text
  grep <pat> <f> - Search for pattern in file(s)
  chmod <m> <f>  - Change file permissions (simulated)
  whoami         - Print current user
  clear          - Clear terminal
  help           - Show this help message
  tree [dir]     - Show directory tree

Shortcuts:
  Tab            - Autocomplete filenames
  Up/Down        - Command history
  ~              - Home directory (/home/user)`};case"pwd":return{output:u};case"whoami":return{output:"user"};case"clear":return D([]),{output:""};case"ls":{const r=e[0]?w(e[0].replace("~","/home/user"),u):u,t=g(r,f);if(!t)return{output:`ls: cannot access '${e[0]||r}': No such file or directory`,isError:!0};if(t.type==="file")return{output:t.name};if(!t.children||Object.keys(t.children).length===0)return{output:""};const c=e.includes("-a")||e.includes("-la")||e.includes("-al"),i=e.includes("-l")||e.includes("-la")||e.includes("-al");let l=Object.values(t.children);if(c&&(l=[{type:"dir",name:".",permissions:t.permissions},{type:"dir",name:"..",permissions:"drwxr-xr-x"},...l]),i){const p=l.map(h=>{const $=h.permissions||(h.type==="dir"?"drwxr-xr-x":"-rw-r--r--"),k=h.type==="file"&&h.content?h.content.length.toString().padStart(5):"  4096";return`${$}  1 user user ${k} Jan  1 00:00 ${h.type==="dir"?`\x1B[1;34m${h.name}/\x1B[0m`:h.name}`});return{output:`total ${l.length}
${p.join(`
`)}`}}return{output:l.map(p=>p.type==="dir"?`${p.name}/`:p.name).join("  ")}}case"cd":{if(!e[0]||e[0]==="~")return T("/home/user"),{output:""};const r=w(e[0].replace("~","/home/user"),u),t=g(r,f);return t?t.type!=="dir"?{output:`cd: not a directory: ${e[0]}`,isError:!0}:(T(r),{output:""}):{output:`cd: no such file or directory: ${e[0]}`,isError:!0}}case"cat":{if(!e[0])return{output:"cat: missing file operand",isError:!0};const r=w(e[0].replace("~","/home/user"),u),t=g(r,f);return t?t.type==="dir"?{output:`cat: ${e[0]}: Is a directory`,isError:!0}:{output:t.content||""}:{output:`cat: ${e[0]}: No such file or directory`,isError:!0}}case"mkdir":{if(!e[0])return{output:"mkdir: missing operand",isError:!0};const r=w(e[0].replace("~","/home/user"),u),t=C(r,f);if(!t)return{output:`mkdir: cannot create directory '${e[0]}': No such file or directory`,isError:!0};if(t.parent.children?.[t.name])return{output:`mkdir: cannot create directory '${e[0]}': File exists`,isError:!0};const c=v(f),i=g(r.split("/").slice(0,-1).join("/")||"/",c);return i&&i.children&&(i.children[t.name]={type:"dir",name:t.name,permissions:"drwxr-xr-x",children:{}},b(c)),{output:""}}case"touch":{if(!e[0])return{output:"touch: missing file operand",isError:!0};const r=w(e[0].replace("~","/home/user"),u),t=C(r,f);if(!t)return{output:`touch: cannot touch '${e[0]}': No such file or directory`,isError:!0};if(!t.parent.children?.[t.name]){const c=v(f),i=g(r.split("/").slice(0,-1).join("/")||"/",c);i&&i.children&&(i.children[t.name]={type:"file",name:t.name,permissions:"-rw-r--r--",content:""},b(c))}return{output:""}}case"rm":{if(!e[0])return{output:"rm: missing operand",isError:!0};const r=e.includes("-r")||e.includes("-rf")||e.includes("-fr"),t=e.find(p=>!p.startsWith("-"));if(!t)return{output:"rm: missing operand",isError:!0};const c=w(t.replace("~","/home/user"),u),i=g(c,f);if(!i)return{output:`rm: cannot remove '${t}': No such file or directory`,isError:!0};if(i.type==="dir"&&!r)return{output:`rm: cannot remove '${t}': Is a directory (use -r)`,isError:!0};const l=v(f),m=C(c,l);return m&&m.parent.children&&(delete m.parent.children[m.name],b(l)),{output:""}}case"cp":{if(e.length<2)return{output:"cp: missing file operand",isError:!0};const r=w(e[0].replace("~","/home/user"),u),t=w(e[1].replace("~","/home/user"),u),c=g(r,f);if(!c)return{output:`cp: cannot stat '${e[0]}': No such file or directory`,isError:!0};if(c.type==="dir")return{output:`cp: -r not specified; omitting directory '${e[0]}'`,isError:!0};const i=v(f),l=g(t,i);let m=t;l&&l.type==="dir"&&(m=t+"/"+c.name);const p=C(m,i);return p&&p.parent.children&&(p.parent.children[p.name]=v(c),p.parent.children[p.name].name=p.name,b(i)),{output:""}}case"mv":{if(e.length<2)return{output:"mv: missing file operand",isError:!0};const r=w(e[0].replace("~","/home/user"),u),t=w(e[1].replace("~","/home/user"),u),c=g(r,f);if(!c)return{output:`mv: cannot stat '${e[0]}': No such file or directory`,isError:!0};const i=v(f),l=C(r,i);if(!l)return{output:`mv: cannot move '${e[0]}'`,isError:!0};const m=g(t,i);let p=t;m&&m.type==="dir"&&(p=t+"/"+c.name);const h=C(p,i);if(h&&h.parent.children&&l.parent.children){const $=v(l.parent.children[l.name]);$.name=h.name,delete l.parent.children[l.name],h.parent.children[h.name]=$,b(i)}return{output:""}}case"echo":return{output:e.join(" ").replace(/^["']|["']$/g,"")};case"grep":{if(e.length<2)return{output:"grep: missing pattern or file",isError:!0};const r=e[0],t=e.slice(1),c=[];for(const i of t)if(i==="*"){const l=g(u,f);if(l?.children){for(const m of Object.values(l.children))if(m.type==="file"&&m.content){const p=m.content.split(`
`);for(const h of p)h.toLowerCase().includes(r.toLowerCase())&&c.push(`${m.name}: ${h}`)}}}else{const l=w(i.replace("~","/home/user"),u),m=g(l,f);if(!m)c.push(`grep: ${i}: No such file or directory`);else if(m.type==="dir")c.push(`grep: ${i}: Is a directory`);else if(m.content){const p=m.content.split(`
`);for(const h of p)h.toLowerCase().includes(r.toLowerCase())&&c.push(t.length>1?`${i}: ${h}`:h)}}return c.length===0?{output:""}:{output:c.join(`
`)}}case"chmod":{if(e.length<2)return{output:"chmod: missing operand",isError:!0};const r=e[0],t=w(e[1].replace("~","/home/user"),u);if(!g(t,f))return{output:`chmod: cannot access '${e[1]}': No such file or directory`,isError:!0};const i=v(f),l=g(t,i);return l&&(l.permissions=r.length===3?`-${["---","--x","-w-","-wx","r--","r-x","rw-","rwx"][+r[0]]}${["---","--x","-w-","-wx","r--","r-x","rw-","rwx"][+r[1]]}${["---","--x","-w-","-wx","r--","r-x","rw-","rwx"][+r[2]]}`:r,b(i)),{output:""}}case"tree":{const r=e[0]?w(e[0].replace("~","/home/user"),u):u,t=g(r,f);if(!t)return{output:`tree: '${e[0]||r}': No such file or directory`,isError:!0};if(t.type==="file")return{output:t.name};const c=[r===u?".":e[0]||r];let i=0,l=0;const m=(p,h)=>{if(!p.children)return;const $=Object.values(p.children);$.forEach((k,X)=>{const J=X===$.length-1,Z=J?"└── ":"├── ",ee=k.type==="dir"?`${k.name}/`:k.name;c.push(`${h}${Z}${ee}`),k.type==="dir"?(i++,m(k,h+(J?"    ":"│   "))):l++})};return m(t,""),c.push(`
${i} directories, ${l} files`),{output:c.join(`
`)}}default:return{output:`${x}: command not found. Type 'help' for available commands.`,isError:!0}}},[u,f,w,g,C,v]),K=y.useCallback(()=>{const n=N.trim();if(!n)return;Q(a=>[n,...a]),I(-1),H([]);const s=U(n);j&&E<S.length&&S[E].validate(n,s.output)&&(z(x=>x+1),M(!1)),n!=="clear"&&D(a=>[...a,{command:n,output:s.output,isError:s.isError}]),W("")},[N,U,j,E]),_=y.useCallback(n=>{if(n.key==="Enter")K();else if(n.key==="ArrowUp")n.preventDefault(),I(s=>{const a=Math.min(s+1,R.length-1);return a>=0&&R[a]&&W(R[a]),a});else if(n.key==="ArrowDown")n.preventDefault(),I(s=>{const a=s-1;return a<0?(W(""),-1):(R[a]&&W(R[a]),a)});else if(n.key==="Tab"){n.preventDefault();const s=N.split(/\s+/),a=s[s.length-1]||"",x=g(u,f);if(!x?.children)return;const e=Object.keys(x.children).filter(r=>r.startsWith(a));e.length===1?(s[s.length-1]=e[0],x.children[e[0]].type==="dir"&&(s[s.length-1]+="/"),W(s.join(" ")),H([])):e.length>1&&H(e)}else H([])},[K,R,N,u,f,g]);y.useEffect(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[P]);const V=y.useCallback(()=>{O.current?.focus()},[]),q=`user@learn-terminal:${u==="/home/user"?"~":u}$`;return o.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"0.75rem",overflow:"hidden",margin:"1.5rem 0"},children:[o.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Terminal Simulator"}),o.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--sl-color-gray-3)"},children:"Practice Linux commands in a safe, simulated environment"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[o.jsx("button",{onClick:()=>{G(!j),z(0),M(!1)},style:{height:"1.75rem",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"999px",padding:"0 0.8rem",border:j?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:j?"#0066cc":"transparent",color:j?"#fff":"var(--sl-color-text)",cursor:"pointer",fontSize:"0.75rem",fontWeight:600},children:j?"Exit Tutorial":"Tutorial Mode"}),o.jsx("button",{onClick:()=>{b(Y()),T("/home/user"),D([])},style:{height:"1.75rem",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"999px",padding:"0 0.8rem",border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.75rem",fontWeight:600},children:"Reset"})]})]})}),o.jsxs(te,{children:[j&&E<S.length&&o.jsxs(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{background:"#0066cc18",borderBottom:"1px solid #0066cc44",padding:"0.75rem 1.25rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#0066cc",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Step ",E+1," of ",S.length]}),o.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,marginTop:"0.15rem"},children:S[E].instruction})]}),o.jsx("button",{onClick:()=>M(!F),style:{height:"1.75rem",display:"inline-flex",alignItems:"center",borderRadius:"999px",padding:"0 0.7rem",border:"1px solid #f59e0b44",background:"#f59e0b18",color:"#f59e0b",cursor:"pointer",fontSize:"0.72rem",fontWeight:600},children:F?"Hide Hint":"Show Hint"})]}),F&&o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},style:{fontSize:"0.78rem",color:"#f59e0b",fontFamily:"monospace",marginTop:"0.4rem"},children:["Hint: ",S[E].hint]}),o.jsx("div",{style:{marginTop:"0.5rem",height:4,background:"var(--sl-color-gray-5)",borderRadius:2,overflow:"hidden"},children:o.jsx("div",{style:{width:`${E/S.length*100}%`,height:"100%",background:"#0066cc",borderRadius:2,transition:"width 0.3s"}})})]}),j&&E>=S.length&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},style:{background:"#10b98118",borderBottom:"1px solid #10b98144",padding:"0.75rem 1.25rem",textAlign:"center"},children:o.jsx("span",{style:{fontSize:"0.9rem",fontWeight:700,color:"#10b981"},children:"Tutorial Complete! You have mastered the basics."})})]}),o.jsxs("div",{ref:A,onClick:V,style:{background:"#0d1117",padding:"1rem",fontFamily:"'Fira Code', 'Cascadia Code', 'Consolas', monospace",fontSize:d?"0.72rem":"0.8rem",lineHeight:1.7,color:"#c9d1d9",minHeight:300,maxHeight:450,overflowY:"auto",cursor:"text"},children:[P.map((n,s)=>o.jsxs("div",{children:[n.command&&o.jsxs("div",{children:[o.jsx("span",{style:{color:"#10b981",fontWeight:600},children:q})," ",o.jsx("span",{children:n.command})]}),n.output&&o.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",color:n.isError?"#ef4444":"#c9d1d9"},children:n.output})]},s)),B.length>0&&o.jsx("div",{style:{color:"#8b5cf6",marginBottom:"0.25rem"},children:B.join("  ")}),o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx("span",{style:{color:"#10b981",fontWeight:600,flexShrink:0},children:q}),o.jsx("span",{children:" "}),o.jsx("input",{ref:O,type:"text",value:N,onChange:n=>W(n.target.value),onKeyDown:_,autoFocus:!0,spellCheck:!1,autoComplete:"off",autoCapitalize:"off",style:{flex:1,background:"transparent",border:"none",outline:"none",color:"#c9d1d9",fontFamily:"inherit",fontSize:"inherit",padding:0,caretColor:"#10b981"}})]})]})]})}export{ce as default};
