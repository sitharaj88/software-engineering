import{j as s}from"./jsx-runtime.ClP7wGfN.js";import{r as g}from"./index.DK-fsZOb.js";import{m as U}from"./proxy.i6brGrIQ.js";const L={default:"#0066cc",comparing:"#f59e0b",swapping:"#ef4444",sorted:"#10b981",pivot:"#8b5cf6"},S={bubble:{name:"Bubble Sort",best:"O(n)",avg:"O(n²)",worst:"O(n²)",space:"O(1)",stable:!0},selection:{name:"Selection Sort",best:"O(n²)",avg:"O(n²)",worst:"O(n²)",space:"O(1)",stable:!1},insertion:{name:"Insertion Sort",best:"O(n)",avg:"O(n²)",worst:"O(n²)",space:"O(1)",stable:!0},merge:{name:"Merge Sort",best:"O(n log n)",avg:"O(n log n)",worst:"O(n log n)",space:"O(n)",stable:!0},quick:{name:"Quick Sort",best:"O(n log n)",avg:"O(n log n)",worst:"O(n²)",space:"O(log n)",stable:!1},heap:{name:"Heap Sort",best:"O(n log n)",avg:"O(n log n)",worst:"O(n log n)",space:"O(1)",stable:!1}};function q(f){return Array.from({length:f},()=>({value:Math.floor(Math.random()*90)+10,state:"default"}))}function X(f=640){const[k,h]=g.useState(!1);return g.useEffect(()=>{const v=window.matchMedia(`(max-width: ${f}px)`);h(v.matches);const m=O=>h(O.matches);return v.addEventListener("change",m),()=>v.removeEventListener("change",m)},[f]),k}function K(){const[f,k]=g.useState(30),[h,v]=g.useState(50),[m,O]=g.useState("bubble"),[z,C]=g.useState(()=>q(30)),[d,W]=g.useState(!1),[H,x]=g.useState(0),[T,u]=g.useState(0),[B,I]=g.useState(!1),p=g.useRef(!1),j=X(),r=g.useCallback(()=>new Promise(e=>setTimeout(e,Math.max(5,200-h*2))),[h]),R=g.useCallback(()=>{p.current=!0,setTimeout(()=>{p.current=!1,C(q(f)),x(0),u(0),W(!1),I(!1)},50)},[f]);g.useEffect(()=>{R()},[f]);const l=e=>C([...e]);async function N(e){for(let n=0;n<e.length-1;n++){for(let t=0;t<e.length-n-1;t++){if(p.current)return;e[t].state="comparing",e[t+1].state="comparing",l(e),x(i=>i+1),await r(),e[t].value>e[t+1].value&&([e[t],e[t+1]]=[e[t+1],e[t]],e[t].state="swapping",e[t+1].state="swapping",l(e),u(i=>i+1),await r()),e[t].state="default",e[t+1].state="default"}e[e.length-1-n].state="sorted",l(e)}e[0].state="sorted",l(e)}async function V(e){for(let n=0;n<e.length-1;n++){let t=n;e[n].state="comparing";for(let i=n+1;i<e.length;i++){if(p.current)return;e[i].state="comparing",l(e),x(o=>o+1),await r(),e[i].value<e[t].value?(t!==n&&(e[t].state="default"),t=i,e[t].state="pivot"):e[i].state="default",l(e)}t!==n&&([e[n],e[t]]=[e[t],e[n]],u(i=>i+1)),e[n].state="sorted",t!==n&&(e[t].state="default"),l(e),await r()}e[e.length-1].state="sorted",l(e)}async function $(e){e[0].state="sorted",l(e);for(let n=1;n<e.length;n++){if(p.current)return;const t=e[n];t.state="comparing",l(e),await r();let i=n-1;for(;i>=0&&e[i].value>t.value;){if(p.current)return;x(o=>o+1),e[i+1]=e[i],e[i+1].state="swapping",l(e),u(o=>o+1),await r(),e[i+1].state="sorted",i--}e[i+1]=t,e[i+1].state="sorted",l(e),await r()}}async function A(e,n=0,t=e.length-1){if(n>=t||p.current)return;const i=Math.floor((n+t)/2);await A(e,n,i),await A(e,i+1,t),await G(e,n,i,t)}async function G(e,n,t,i){const o=e.slice(n,t+1),a=e.slice(t+1,i+1);let c=0,b=0,y=n;for(;c<o.length&&b<a.length;){if(p.current)return;e[y].state="comparing",l(e),x(E=>E+1),await r(),o[c].value<=a[b].value?(e[y]={...o[c],state:"swapping"},c++):(e[y]={...a[b],state:"swapping"},b++),u(E=>E+1),l(e),await r(),e[y].state=i===e.length-1&&n===0?"sorted":"default",y++}for(;c<o.length;){if(p.current)return;e[y]={...o[c],state:"default"},c++,y++,l(e),await r()}for(;b<a.length;){if(p.current)return;e[y]={...a[b],state:"default"},b++,y++,l(e),await r()}}async function F(e,n=0,t=e.length-1){if(n>=t||p.current)return;const i=await P(e,n,t);if(i!==void 0){e[i].state="sorted",l(e),await F(e,n,i-1),await F(e,i+1,t);for(let o=n;o<=t;o++)e[o].state="sorted";l(e)}}async function P(e,n,t){const i=e[t].value;e[t].state="pivot",l(e);let o=n-1;for(let a=n;a<t;a++){if(p.current)return;e[a].state="comparing",l(e),x(c=>c+1),await r(),e[a].value<i&&(o++,[e[o],e[a]]=[e[a],e[o]],e[o].state="swapping",u(c=>c+1),l(e),await r(),e[o].state="default"),e[a].state="default"}return[e[o+1],e[t]]=[e[t],e[o+1]],u(a=>a+1),l(e),o+1}async function Q(e){const n=e.length;for(let t=Math.floor(n/2)-1;t>=0;t--)await M(e,n,t);for(let t=n-1;t>0;t--){if(p.current)return;[e[0],e[t]]=[e[t],e[0]],e[0].state="swapping",e[t].state="swapping",l(e),u(i=>i+1),await r(),e[t].state="sorted",await M(e,t,0)}e[0].state="sorted",l(e)}async function M(e,n,t){let i=t;const o=2*t+1,a=2*t+2;p.current||(o<n&&(x(c=>c+1),e[o].value>e[i].value&&(i=o)),a<n&&(x(c=>c+1),e[a].value>e[i].value&&(i=a)),i!==t&&(e[t].state="comparing",e[i].state="comparing",l(e),await r(),[e[t],e[i]]=[e[i],e[t]],e[t].state="default",e[i].state="default",u(c=>c+1),l(e),await r(),await M(e,n,i)))}const D=g.useCallback(async()=>{W(!0),I(!1),x(0),u(0),p.current=!1;const e=z.map(t=>({...t,state:"default"}));C(e),await{bubble:N,selection:V,insertion:$,merge:A,quick:F,heap:Q}[m](e),p.current||(e.forEach(t=>t.state="sorted"),l(e),I(!0)),W(!1)},[z,m,r]),w=S[m];return s.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:12,overflow:"hidden",margin:"1.5rem 0",background:"var(--sl-color-bg)"},children:[s.jsx("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:j?s.jsxs(s.Fragment,{children:[s.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Sorting Algorithm Visualizer"}),s.jsx("div",{style:{display:"flex",gap:"0.4rem",marginTop:"0.75rem",overflowX:"auto",WebkitOverflowScrolling:"touch",paddingBottom:4},children:Object.keys(S).map(e=>s.jsx("button",{onClick:()=>!d&&O(e),disabled:d,style:{padding:"0.5rem 0.9rem",borderRadius:6,minHeight:44,border:m===e?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:m===e?"#0066cc":"transparent",color:m===e?"#fff":"var(--sl-color-text)",cursor:d?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:600,transition:"all 0.2s",whiteSpace:"nowrap",flexShrink:0},children:S[e].name},e))})]}):s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Sorting Algorithm Visualizer"}),s.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:Object.keys(S).map(e=>s.jsx("button",{onClick:()=>!d&&O(e),disabled:d,style:{padding:"0.5rem 0.9rem",borderRadius:6,minHeight:44,border:m===e?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:m===e?"#0066cc":"transparent",color:m===e?"#fff":"var(--sl-color-text)",cursor:d?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:600,transition:"all 0.2s"},children:S[e].name},e))})]})}),s.jsx("div",{style:{padding:"1.5rem 1.25rem",display:"flex",alignItems:"flex-end",gap:2,height:260,justifyContent:"center"},children:z.map((e,n)=>s.jsx(U.div,{layout:!0,style:{flex:1,maxWidth:30,borderRadius:"3px 3px 0 0",background:L[e.state],minWidth:4},animate:{height:`${e.value/100*200}px`},transition:{duration:.1}},n))}),s.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)",...j?{display:"flex",flexDirection:"column",gap:"0.75rem"}:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"}},children:j?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:D,disabled:d,style:{flex:1,padding:"0.65rem",borderRadius:6,border:"none",minHeight:44,background:"#10b981",color:"#fff",cursor:d?"not-allowed":"pointer",fontWeight:700,fontSize:"0.85rem"},children:d?"Sorting...":"Sort"}),s.jsx("button",{onClick:R,style:{flex:1,padding:"0.65rem",borderRadius:6,minHeight:44,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"New Array"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:"Size"}),s.jsx("input",{type:"range",min:10,max:80,value:f,onChange:e=>!d&&k(+e.target.value),disabled:d,style:{flex:1,height:4}}),s.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.8rem",minWidth:24},children:f})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:"Speed"}),s.jsx("input",{type:"range",min:1,max:100,value:h,onChange:e=>v(+e.target.value),style:{flex:1,height:4}}),s.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.8rem",minWidth:24},children:h})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem"},children:[s.jsxs("span",{children:["Comparisons: ",s.jsx("strong",{children:H})]}),s.jsxs("span",{children:["Swaps: ",s.jsx("strong",{children:T})]}),B&&s.jsx("span",{style:{color:"#10b981",fontWeight:700},children:"Done!"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s.jsx("button",{onClick:D,disabled:d,style:{padding:"0.65rem 1.2rem",borderRadius:6,border:"none",minHeight:44,background:"#10b981",color:"#fff",cursor:d?"not-allowed":"pointer",fontWeight:700,fontSize:"0.85rem"},children:d?"Sorting...":"Sort"}),s.jsx("button",{onClick:R,style:{padding:"0.65rem 1rem",borderRadius:6,minHeight:44,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"New Array"})]}),s.jsx("div",{style:{width:1,height:28,background:"var(--sl-color-gray-4)"}}),s.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.8rem",color:"var(--sl-color-gray-3)"},children:["Size",s.jsx("input",{type:"range",min:10,max:80,value:f,onChange:e=>!d&&k(+e.target.value),disabled:d,style:{width:100}}),s.jsx("span",{style:{minWidth:24,fontFamily:"monospace",fontSize:"0.8rem"},children:f})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.8rem",color:"var(--sl-color-gray-3)"},children:["Speed",s.jsx("input",{type:"range",min:1,max:100,value:h,onChange:e=>v(+e.target.value),style:{width:100}}),s.jsx("span",{style:{minWidth:24,fontFamily:"monospace",fontSize:"0.8rem"},children:h})]})]}),s.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem",marginLeft:"auto"},children:[s.jsxs("span",{children:["Comparisons: ",s.jsx("strong",{children:H})]}),s.jsxs("span",{children:["Swaps: ",s.jsx("strong",{children:T})]}),B&&s.jsx("span",{style:{color:"#10b981",fontWeight:700},children:"Done!"})]})]})}),s.jsxs("div",{style:{padding:"0.75rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)",fontSize:"0.78rem",...j?{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"}:{display:"flex",gap:"1.5rem"}},children:[s.jsxs("span",{children:["Best: ",s.jsx("strong",{style:{color:"#10b981"},children:w.best})]}),s.jsxs("span",{children:["Average: ",s.jsx("strong",{style:{color:"#f59e0b"},children:w.avg})]}),s.jsxs("span",{children:["Worst: ",s.jsx("strong",{style:{color:"#ef4444"},children:w.worst})]}),s.jsxs("span",{children:["Space: ",s.jsx("strong",{children:w.space})]}),s.jsxs("span",{children:["Stable: ",s.jsx("strong",{children:w.stable?"Yes":"No"})]})]}),s.jsx("div",{style:{borderTop:"1px solid var(--sl-color-gray-5)",fontSize:"0.75rem",...j?{display:"flex",flexWrap:"wrap",gap:"0.75rem",padding:"0.75rem 1.25rem"}:{display:"flex",gap:"1rem",padding:"0.5rem 1.25rem"}},children:Object.entries(L).map(([e,n])=>s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[s.jsx("span",{style:{width:12,height:12,borderRadius:2,background:n,display:"inline-block"}}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})}export{K as default};
