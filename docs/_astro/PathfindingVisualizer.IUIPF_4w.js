import{j as r}from"./jsx-runtime.ClP7wGfN.js";import{r as f}from"./index.DK-fsZOb.js";const C=20,R=35,O={bfs:{name:"BFS",guarantees:"Shortest path (unweighted)",weighted:!1},dfs:{name:"DFS",guarantees:"Finds a path (not necessarily shortest)",weighted:!1},dijkstra:{name:"Dijkstra's",guarantees:"Shortest path (weighted)",weighted:!0},astar:{name:"A* Search",guarantees:"Shortest path (weighted, with heuristic)",weighted:!0}},J={empty:"transparent",wall:"#374151",start:"#10b981",end:"#ef4444",visited:"#0066cc40",path:"#f59e0b",current:"#8b5cf6"};function A(){const h=Array.from({length:C},()=>Array(R).fill("empty"));return h[Math.floor(C/2)][5]="start",h[Math.floor(C/2)][R-6]="end",h}function ee(h=640){const[x,b]=f.useState(!1);return f.useEffect(()=>{const z=window.matchMedia(`(max-width: ${h}px)`);b(z.matches);const o=M=>b(M.matches);return z.addEventListener("change",o),()=>z.removeEventListener("change",o)},[h]),x}function se(){const[h,x]=f.useState(A),[b,z]=f.useState("bfs"),[o,M]=f.useState(!1),[g,V]=f.useState("wall"),[v,k]=f.useState({visited:0,pathLength:0}),[B,W]=f.useState(!1),w=f.useRef(!1),L=f.useRef(!1),j=ee(),S=e=>{for(let t=0;t<C;t++)for(let s=0;s<R;s++)if(h[t][s]===e)return[t,s];return null},P=f.useCallback(()=>{x(e=>e.map(t=>t.map(s=>s==="visited"||s==="path"||s==="current"?"empty":s))),k({visited:0,pathLength:0}),W(!1)},[]),G=f.useCallback(()=>{w.current=!0,setTimeout(()=>{w.current=!1,x(A()),k({visited:0,pathLength:0}),M(!1),W(!1)},50)},[]),N=f.useCallback(()=>{const e=A();for(let t=0;t<C;t++)for(let s=0;s<R;s++)e[t][s]==="empty"&&Math.random()<.3&&(e[t][s]="wall");x(e),k({visited:0,pathLength:0}),W(!1)},[]),q=f.useCallback((e,t)=>{o||x(s=>{const n=s.map(a=>[...a]);if(g==="start"){const a=S("start");a&&(n[a[0]][a[1]]="empty"),n[e][t]="start"}else if(g==="end"){const a=S("end");a&&(n[a[0]][a[1]]="empty"),n[e][t]="end"}else g==="erase"?n[e][t]!=="start"&&n[e][t]!=="end"&&(n[e][t]="empty"):n[e][t]==="empty"?n[e][t]="wall":n[e][t]==="wall"&&(n[e][t]="empty");return n})},[o,g,h]),I=()=>new Promise(e=>setTimeout(e,15)),D=(e,t)=>[[0,1],[1,0],[0,-1],[-1,0]].map(([n,a])=>[e+n,t+a]).filter(([n,a])=>n>=0&&n<C&&a>=0&&a<R),T=async(e,t)=>{const s=[];let n=`${t[0]},${t[1]}`;for(;e.has(n);){const[a,u]=n.split(",").map(Number);s.unshift([a,u]),n=e.get(n)}for(const[a,u]of s){if(w.current)return;x(d=>{const c=d.map(l=>[...l]);return c[a][u]!=="start"&&c[a][u]!=="end"&&(c[a][u]="path"),c}),await I()}k(a=>({...a,pathLength:s.length}))},K=async()=>{const e=S("start"),t=S("end");if(!e||!t)return;const s=[e],n=new Set([`${e[0]},${e[1]}`]),a=new Map;let u=0;for(;s.length>0;){if(w.current)return;const[d,c]=s.shift();if(u++,k(l=>({...l,visited:u})),d===t[0]&&c===t[1])return await T(a,t),!0;x(l=>{const i=l.map(p=>[...p]);return i[d][c]!=="start"&&(i[d][c]="visited"),i}),await I();for(const[l,i]of D(d,c)){const p=`${l},${i}`;!n.has(p)&&h[l][i]!=="wall"&&(n.add(p),a.set(p,`${d},${c}`),s.push([l,i]))}}return!1},Q=async()=>{const e=S("start"),t=S("end");if(!e||!t)return;const s=[e],n=new Set([`${e[0]},${e[1]}`]),a=new Map;let u=0;for(;s.length>0;){if(w.current)return;const[d,c]=s.pop();if(u++,k(l=>({...l,visited:u})),d===t[0]&&c===t[1])return await T(a,t),!0;x(l=>{const i=l.map(p=>[...p]);return i[d][c]!=="start"&&(i[d][c]="visited"),i}),await I();for(const[l,i]of D(d,c)){const p=`${l},${i}`;!n.has(p)&&h[l][i]!=="wall"&&(n.add(p),a.set(p,`${d},${c}`),s.push([l,i]))}}return!1},U=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),X=async e=>{const t=S("start"),s=S("end");if(!t||!s)return;const n=new Map,a=new Map,u=new Map,d=[t],c=new Set;let l=0;for(n.set(`${t[0]},${t[1]}`,0),a.set(`${t[0]},${t[1]}`,e?U(t,s):0);d.length>0;){if(w.current)return;d.sort((m,y)=>(a.get(`${m[0]},${m[1]}`)||1/0)-(a.get(`${y[0]},${y[1]}`)||1/0));const[i,p]=d.shift(),E=`${i},${p}`;if(l++,k(m=>({...m,visited:l})),i===s[0]&&p===s[1])return await T(u,s),!0;c.add(E),x(m=>{const y=m.map($=>[...$]);return y[i][p]!=="start"&&(y[i][p]="visited"),y}),await I();for(const[m,y]of D(i,p)){const $=`${m},${y}`;if(c.has($)||h[m][y]==="wall")continue;const F=(n.get(E)||0)+1;F<(n.get($)||1/0)&&(u.set($,E),n.set($,F),a.set($,F+(e?U([m,y],s):0)),d.find(([Y,Z])=>Y===m&&Z===y)||d.push([m,y]))}}return!1},_=f.useCallback(async()=>{switch(P(),M(!0),W(!1),w.current=!1,await new Promise(e=>setTimeout(e,100)),b){case"bfs":await K();break;case"dfs":await Q();break;case"dijkstra":await X(!1);break;case"astar":await X(!0);break}w.current||W(!0),M(!1)},[b,h]),H=[["wall","Wall","#374151"],["start","Start","#10b981"],["end","End","#ef4444"],["erase","Erase","#6b7280"]];return r.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:12,overflow:"hidden",margin:"1.5rem 0"},children:[r.jsx("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:j?"flex-start":"center",flexDirection:j?"column":"row",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Pathfinding Visualizer"}),r.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:O[b].guarantees})]}),r.jsx("div",{style:{display:"flex",gap:"0.4rem",...j?{overflowX:"auto",width:"100%",WebkitOverflowScrolling:"touch",paddingBottom:"0.25rem"}:{flexWrap:"wrap"}},children:Object.keys(O).map(e=>r.jsx("button",{onClick:()=>!o&&z(e),disabled:o,style:{padding:"0.5rem 0.9rem",borderRadius:6,border:b===e?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:b===e?"#0066cc":"transparent",color:b===e?"#fff":"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:600,minHeight:44,whiteSpace:"nowrap",flexShrink:0},children:O[e].name},e))})]})}),r.jsx("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:j?r.jsxs("div",{children:[r.jsx("span",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--sl-color-gray-2)",display:"block",marginBottom:"0.4rem"},children:"Draw Tool"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.4rem"},children:H.map(([e,t,s])=>r.jsxs("button",{onClick:()=>V(e),style:{padding:"0.55rem 0.5rem",borderRadius:6,border:g===e?`2.5px solid ${s}`:"1px solid var(--sl-color-gray-4)",background:g===e?`${s}30`:"transparent",color:g===e?s:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.72rem",fontWeight:g===e?700:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.3rem",minHeight:44,transition:"all 0.15s ease"},children:[r.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:s,display:"inline-block",flexShrink:0,border:e==="erase"?"1.5px solid var(--sl-color-gray-3)":"none",boxSizing:"border-box"}}),t]},e))})]}):r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.78rem",color:"var(--sl-color-gray-2)",marginRight:"0.25rem",fontWeight:700,letterSpacing:"0.01em"},children:"Draw Tool:"}),H.map(([e,t,s])=>r.jsxs("button",{onClick:()=>V(e),style:{padding:g===e?"0.3rem 0.7rem":"0.25rem 0.6rem",borderRadius:6,border:g===e?`2.5px solid ${s}`:"1px solid var(--sl-color-gray-4)",background:g===e?`${s}30`:"transparent",color:g===e?s:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.72rem",fontWeight:g===e?700:600,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.15s ease",boxShadow:g===e?`0 0 0 1px ${s}20`:"none"},children:[r.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:s,display:"inline-block",flexShrink:0,border:e==="erase"?"1.5px solid var(--sl-color-gray-3)":"none",boxSizing:"border-box"}}),t]},e))]})}),r.jsx("div",{style:{padding:"0.75rem",overflowX:"auto"},onMouseLeave:()=>{L.current=!1},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${R}, 1fr)`,gap:1,maxWidth:700,margin:"0 auto"},children:h.map((e,t)=>e.map((s,n)=>r.jsxs("div",{onMouseDown:()=>{L.current=!0,q(t,n)},onMouseUp:()=>{L.current=!1},onMouseEnter:()=>{L.current&&q(t,n)},style:{aspectRatio:"1",borderRadius:2,cursor:o?"default":"pointer",background:J[s],border:s==="empty"?"1px solid var(--sl-color-gray-5)":"none",transition:"background 0.15s",fontSize:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:[s==="start"&&"▶",s==="end"&&"◎"]},`${t}-${n}`)))})}),r.jsx("div",{style:{padding:"0.75rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:j?r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:[r.jsx("button",{onClick:_,disabled:o,style:{width:"100%",padding:"0.7rem",borderRadius:8,border:"none",background:o?"#6b7280":"#10b981",color:"#fff",cursor:o?"not-allowed":"pointer",fontWeight:700,fontSize:"0.9rem",boxShadow:o?"none":"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.15s ease"},children:o?"Running...":"Visualize"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:P,disabled:o,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.78rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Clear Path"}),r.jsx("button",{onClick:N,disabled:o,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.78rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Random Maze"}),r.jsx("button",{onClick:G,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.78rem",fontWeight:500},children:"Reset"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"var(--sl-color-gray-2)",alignItems:"center"},children:[r.jsxs("span",{children:["Visited: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:v.visited})]}),r.jsxs("span",{children:["Path: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:v.pathLength||"–"})]}),B&&r.jsx("span",{style:{color:v.pathLength>0?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.78rem",padding:"0.15rem 0.5rem",borderRadius:4,background:v.pathLength>0?"#10b98118":"#ef444418"},children:v.pathLength>0?"Found!":"No Path"})]})]}):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("button",{onClick:_,disabled:o,style:{padding:"0.55rem 1.4rem",borderRadius:8,border:"none",background:o?"#6b7280":"#10b981",color:"#fff",cursor:o?"not-allowed":"pointer",fontWeight:700,fontSize:"0.9rem",boxShadow:o?"none":"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.15s ease"},children:o?"Running...":"Visualize"}),r.jsx("div",{style:{width:1,height:28,background:"var(--sl-color-gray-4)",margin:"0 0.25rem",flexShrink:0}}),r.jsx("button",{onClick:P,disabled:o,style:{padding:"0.4rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Clear Path"}),r.jsx("button",{onClick:N,disabled:o,style:{padding:"0.4rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Random Maze"}),r.jsx("button",{onClick:G,style:{padding:"0.4rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.8rem",fontWeight:500},children:"Reset"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",fontSize:"0.8rem",alignItems:"center",color:"var(--sl-color-gray-2)"},children:[r.jsxs("span",{children:["Cells Visited: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:v.visited})]}),r.jsx("span",{style:{color:"var(--sl-color-gray-4)"},children:"|"}),r.jsxs("span",{children:["Path Length: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:v.pathLength||"–"})]}),B&&r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{color:"var(--sl-color-gray-4)"},children:"|"}),r.jsx("span",{style:{color:v.pathLength>0?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.82rem"},children:v.pathLength>0?"Path Found!":"No Path"})]})]})]})}),r.jsx("div",{style:{padding:j?"0.75rem 1.25rem":"0.5rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",display:"flex",gap:j?"0.75rem":"1rem",flexWrap:"wrap",fontSize:j?"0.75rem":"0.72rem"},children:Object.entries(J).filter(([e])=>e!=="current").map(([e,t])=>r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[r.jsx("span",{style:{width:12,height:12,borderRadius:2,background:t||"var(--sl-color-gray-5)",border:t==="transparent"?"1px solid var(--sl-color-gray-4)":"none",display:"inline-block"}}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})}export{se as default};
