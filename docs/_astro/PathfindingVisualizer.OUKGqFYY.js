import{j as r}from"./jsx-runtime.ClP7wGfN.js";import{r as f}from"./index.DK-fsZOb.js";const R=20,C=35,A={bfs:{name:"BFS",guarantees:"Shortest path (unweighted)",weighted:!1},dfs:{name:"DFS",guarantees:"Finds a path (not necessarily shortest)",weighted:!1},dijkstra:{name:"Dijkstra's",guarantees:"Shortest path (weighted)",weighted:!0},astar:{name:"A* Search",guarantees:"Shortest path (weighted, with heuristic)",weighted:!0}},_={empty:"transparent",wall:"#374151",start:"#10b981",end:"#ef4444",visited:"#0066cc40",path:"#f59e0b",current:"#8b5cf6"};function B(){const u=Array.from({length:R},()=>Array(C).fill("empty"));return u[Math.floor(R/2)][5]="start",u[Math.floor(R/2)][C-6]="end",u}function ee(u=640){const[y,b]=f.useState(!1);return f.useEffect(()=>{const z=window.matchMedia(`(max-width: ${u}px)`);b(z.matches);const o=M=>b(M.matches);return z.addEventListener("change",o),()=>z.removeEventListener("change",o)},[u]),y}function se(){const[u,y]=f.useState(B),[b,z]=f.useState("bfs"),[o,M]=f.useState(!1),[v,H]=f.useState("wall"),[x,j]=f.useState({visited:0,pathLength:0}),[F,W]=f.useState(!1),w=f.useRef(!1),L=f.useRef(!1),k=ee(),S=e=>{for(let t=0;t<R;t++)for(let s=0;s<C;s++)if(u[t][s]===e)return[t,s];return null},T=f.useCallback(()=>{y(e=>e.map(t=>t.map(s=>s==="visited"||s==="path"||s==="current"?"empty":s))),j({visited:0,pathLength:0}),W(!1)},[]),V=f.useCallback(()=>{w.current=!0,setTimeout(()=>{w.current=!1,y(B()),j({visited:0,pathLength:0}),M(!1),W(!1)},50)},[]),G=f.useCallback(()=>{const e=B();for(let t=0;t<R;t++)for(let s=0;s<C;s++)e[t][s]==="empty"&&Math.random()<.3&&(e[t][s]="wall");y(e),j({visited:0,pathLength:0}),W(!1)},[]),N=f.useCallback((e,t)=>{o||y(s=>{const n=s.map(a=>[...a]);if(v==="start"){const a=S("start");a&&(n[a[0]][a[1]]="empty"),n[e][t]="start"}else if(v==="end"){const a=S("end");a&&(n[a[0]][a[1]]="empty"),n[e][t]="end"}else v==="erase"?n[e][t]!=="start"&&n[e][t]!=="end"&&(n[e][t]="empty"):n[e][t]==="empty"?n[e][t]="wall":n[e][t]==="wall"&&(n[e][t]="empty");return n})},[o,v,u]),I=()=>new Promise(e=>setTimeout(e,15)),P=(e,t)=>[[0,1],[1,0],[0,-1],[-1,0]].map(([n,a])=>[e+n,t+a]).filter(([n,a])=>n>=0&&n<R&&a>=0&&a<C),D=async(e,t)=>{const s=[];let n=`${t[0]},${t[1]}`;for(;e.has(n);){const[a,g]=n.split(",").map(Number);s.unshift([a,g]),n=e.get(n)}for(const[a,g]of s){if(w.current)return;y(d=>{const c=d.map(l=>[...l]);return c[a][g]!=="start"&&c[a][g]!=="end"&&(c[a][g]="path"),c}),await I()}j(a=>({...a,pathLength:s.length}))},J=async()=>{const e=S("start"),t=S("end");if(!e||!t)return;const s=[e],n=new Set([`${e[0]},${e[1]}`]),a=new Map;let g=0;for(;s.length>0;){if(w.current)return;const[d,c]=s.shift();if(g++,j(l=>({...l,visited:g})),d===t[0]&&c===t[1])return await D(a,t),!0;y(l=>{const i=l.map(p=>[...p]);return i[d][c]!=="start"&&(i[d][c]="visited"),i}),await I();for(const[l,i]of P(d,c)){const p=`${l},${i}`;!n.has(p)&&u[l][i]!=="wall"&&(n.add(p),a.set(p,`${d},${c}`),s.push([l,i]))}}return!1},K=async()=>{const e=S("start"),t=S("end");if(!e||!t)return;const s=[e],n=new Set([`${e[0]},${e[1]}`]),a=new Map;let g=0;for(;s.length>0;){if(w.current)return;const[d,c]=s.pop();if(g++,j(l=>({...l,visited:g})),d===t[0]&&c===t[1])return await D(a,t),!0;y(l=>{const i=l.map(p=>[...p]);return i[d][c]!=="start"&&(i[d][c]="visited"),i}),await I();for(const[l,i]of P(d,c)){const p=`${l},${i}`;!n.has(p)&&u[l][i]!=="wall"&&(n.add(p),a.set(p,`${d},${c}`),s.push([l,i]))}}return!1},q=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),U=async e=>{const t=S("start"),s=S("end");if(!t||!s)return;const n=new Map,a=new Map,g=new Map,d=[t],c=new Set;let l=0;for(n.set(`${t[0]},${t[1]}`,0),a.set(`${t[0]},${t[1]}`,e?q(t,s):0);d.length>0;){if(w.current)return;d.sort((h,m)=>(a.get(`${h[0]},${h[1]}`)||1/0)-(a.get(`${m[0]},${m[1]}`)||1/0));const[i,p]=d.shift(),E=`${i},${p}`;if(l++,j(h=>({...h,visited:l})),i===s[0]&&p===s[1])return await D(g,s),!0;c.add(E),y(h=>{const m=h.map($=>[...$]);return m[i][p]!=="start"&&(m[i][p]="visited"),m}),await I();for(const[h,m]of P(i,p)){const $=`${h},${m}`;if(c.has($)||u[h][m]==="wall")continue;const O=(n.get(E)||0)+1;O<(n.get($)||1/0)&&(g.set($,E),n.set($,O),a.set($,O+(e?q([h,m],s):0)),d.find(([Y,Z])=>Y===h&&Z===m)||d.push([h,m]))}}return!1},X=f.useCallback(async()=>{switch(T(),M(!0),W(!1),w.current=!1,await new Promise(e=>setTimeout(e,100)),b){case"bfs":await J();break;case"dfs":await K();break;case"dijkstra":await U(!1);break;case"astar":await U(!0);break}w.current||W(!0),M(!1)},[b,u]),Q=[["wall","Wall","#374151"],["start","Start","#10b981"],["end","End","#ef4444"],["erase","Erase","#6b7280"]];return r.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:12,overflow:"hidden",margin:"1.5rem 0"},children:[r.jsx("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:k?"flex-start":"center",flexDirection:k?"column":"row",gap:"0.5rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Pathfinding Visualizer"}),r.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:A[b].guarantees})]}),r.jsx("div",{style:{display:"flex",gap:"0.4rem",...k?{overflowX:"auto",width:"100%",WebkitOverflowScrolling:"touch",paddingBottom:"0.25rem"}:{flexWrap:"wrap"}},children:Object.keys(A).map(e=>r.jsx("button",{onClick:()=>!o&&z(e),disabled:o,style:{padding:"0.5rem 0.9rem",borderRadius:6,border:b===e?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:b===e?"#0066cc":"transparent",color:b===e?"#fff":"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:600,minHeight:44,whiteSpace:"nowrap",flexShrink:0},children:A[e].name},e))})]})}),r.jsxs("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Draw Tool"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.4rem"},children:Q.map(([e,t,s])=>r.jsxs("button",{onClick:()=>H(e),style:{padding:"0.55rem 0.5rem",borderRadius:6,border:v===e?`2.5px solid ${s}`:"1px solid var(--sl-color-gray-4)",background:v===e?`${s}30`:"transparent",color:v===e?s:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.72rem",fontWeight:v===e?700:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.3rem",minHeight:44,transition:"all 0.15s ease"},children:[r.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:s,display:"inline-block",flexShrink:0,border:e==="erase"?"1.5px solid var(--sl-color-gray-3)":"none",boxSizing:"border-box"}}),t]},e))})]}),r.jsx("div",{style:{padding:"0.75rem",overflowX:"auto"},onMouseLeave:()=>{L.current=!1},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${C}, 1fr)`,gap:1,maxWidth:700,margin:"0 auto"},children:u.map((e,t)=>e.map((s,n)=>r.jsxs("div",{onMouseDown:()=>{L.current=!0,N(t,n)},onMouseUp:()=>{L.current=!1},onMouseEnter:()=>{L.current&&N(t,n)},style:{aspectRatio:"1",borderRadius:2,cursor:o?"default":"pointer",background:_[s],border:s==="empty"?"1px solid var(--sl-color-gray-5)":"none",transition:"background 0.15s",fontSize:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:[s==="start"&&"▶",s==="end"&&"◎"]},`${t}-${n}`)))})}),r.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:k?r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:[r.jsx("button",{onClick:X,disabled:o,style:{width:"100%",padding:"0.7rem",borderRadius:8,border:"none",background:o?"#6b7280":"#10b981",color:"#fff",cursor:o?"not-allowed":"pointer",fontWeight:700,fontSize:"0.9rem",boxShadow:o?"none":"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.15s ease"},children:o?"Running...":"Visualize"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:T,disabled:o,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.78rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Clear Path"}),r.jsx("button",{onClick:G,disabled:o,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.78rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Random Maze"}),r.jsx("button",{onClick:V,style:{flex:1,padding:"0.55rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.78rem",fontWeight:500},children:"Reset"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"var(--sl-color-gray-2)",alignItems:"center"},children:[r.jsxs("span",{children:["Visited: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:x.visited})]}),r.jsxs("span",{children:["Path: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:x.pathLength||"–"})]}),F&&r.jsx("span",{style:{color:x.pathLength>0?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.78rem",padding:"0.15rem 0.5rem",borderRadius:4,background:x.pathLength>0?"#10b98118":"#ef444418"},children:x.pathLength>0?"Found!":"No Path"})]})]}):r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem",alignItems:"start"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Actions"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[r.jsx("button",{onClick:X,disabled:o,style:{padding:"0.55rem 1.4rem",borderRadius:8,border:"none",background:o?"#6b7280":"#10b981",color:"#fff",cursor:o?"not-allowed":"pointer",fontWeight:700,fontSize:"0.9rem",boxShadow:o?"none":"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.15s ease"},children:o?"Running...":"Visualize"}),r.jsx("button",{onClick:T,disabled:o,style:{padding:"0.45rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Clear Path"}),r.jsx("button",{onClick:G,disabled:o,style:{padding:"0.45rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:o?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,opacity:o?.5:1,transition:"opacity 0.15s ease"},children:"Random Maze"}),r.jsx("button",{onClick:V,style:{padding:"0.45rem 0.85rem",borderRadius:6,border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.8rem",fontWeight:500},children:"Reset"})]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Statistics"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.35rem",fontSize:"0.8rem",color:"var(--sl-color-gray-2)"},children:[r.jsxs("span",{children:["Cells Visited: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:x.visited})]}),r.jsxs("span",{children:["Path Length: ",r.jsx("strong",{style:{color:"var(--sl-color-text)"},children:x.pathLength||"–"})]}),F&&r.jsxs("span",{style:{color:x.pathLength>0?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.8rem",padding:"0.15rem 0.5rem",borderRadius:4,background:x.pathLength>0?"#10b98118":"#ef444418",display:"inline-block",alignSelf:"flex-start"},children:["Status: ",x.pathLength>0?"Found!":"No Path"]})]})]})]})}),r.jsx("div",{style:{padding:k?"0.75rem 1.25rem":"0.5rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",display:"flex",gap:k?"0.75rem":"1rem",flexWrap:"wrap",fontSize:k?"0.75rem":"0.72rem"},children:Object.entries(_).filter(([e])=>e!=="current").map(([e,t])=>r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[r.jsx("span",{style:{width:12,height:12,borderRadius:2,background:t||"var(--sl-color-gray-5)",border:t==="transparent"?"1px solid var(--sl-color-gray-4)":"none",display:"inline-block"}}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})}export{se as default};
