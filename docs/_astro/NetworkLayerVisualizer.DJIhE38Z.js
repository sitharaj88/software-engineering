import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as l}from"./index.DK-fsZOb.js";import{m}from"./proxy.i6brGrIQ.js";import{A as L}from"./index.CMzh-1wI.js";const D=[{num:7,name:"Application",protocols:"HTTP, FTP, SMTP, DNS",dataUnit:"Data",devices:"Gateway, Proxy",description:"Provides network services directly to end-user applications. Handles high-level protocols and user authentication.",color:"#ef4444",adds:"App Header"},{num:6,name:"Presentation",protocols:"SSL/TLS, JPEG, ASCII",dataUnit:"Data",devices:"Gateway",description:"Translates data formats, handles encryption/decryption, and data compression between the application and network.",color:"#f59e0b",adds:"Encryption"},{num:5,name:"Session",protocols:"NetBIOS, RPC, PPTP",dataUnit:"Data",devices:"Gateway",description:"Manages sessions between applications. Establishes, maintains, and terminates connections.",color:"#10b981",adds:"Session ID"},{num:4,name:"Transport",protocols:"TCP, UDP, SCTP",dataUnit:"Segment",devices:"Load Balancer",description:"Ensures reliable end-to-end delivery with flow control, error checking, and segmentation.",color:"#0066cc",adds:"TCP Header"},{num:3,name:"Network",protocols:"IP, ICMP, OSPF, BGP",dataUnit:"Packet",devices:"Router",description:"Handles logical addressing and routing. Determines the best path for data across networks.",color:"#8b5cf6",adds:"IP Header"},{num:2,name:"Data Link",protocols:"Ethernet, Wi-Fi, PPP",dataUnit:"Frame",devices:"Switch, Bridge",description:"Provides node-to-node data transfer and handles error detection via MAC addressing and framing.",color:"#ec4899",adds:"Frame H/T"},{num:1,name:"Physical",protocols:"USB, DSL, Bluetooth",dataUnit:"Bits",devices:"Hub, Repeater",description:"Transmits raw bitstream over physical medium. Defines electrical and physical specs.",color:"#6b7280",adds:"Signal"}],H=[{num:4,name:"Application",protocols:"HTTP, FTP, SMTP, DNS, SSH",dataUnit:"Data",devices:"Gateway, Proxy",description:"Combines OSI layers 5-7. Provides application-level protocols and services to end users.",color:"#ef4444",adds:"App Header"},{num:3,name:"Transport",protocols:"TCP, UDP",dataUnit:"Segment",devices:"Load Balancer",description:"End-to-end communication with reliability (TCP) or speed (UDP). Handles port-based multiplexing.",color:"#0066cc",adds:"TCP Header"},{num:2,name:"Internet",protocols:"IP, ICMP, ARP, IGMP",dataUnit:"Packet",devices:"Router",description:"Logical addressing and routing across interconnected networks using IP addresses.",color:"#8b5cf6",adds:"IP Header"},{num:1,name:"Network Access",protocols:"Ethernet, Wi-Fi, PPP",dataUnit:"Frame",devices:"Switch, NIC",description:"Combines OSI layers 1-2. Handles physical addressing, framing, and media access.",color:"#10b981",adds:"Frame H/T"}];function q(c=640){const[v,r]=l.useState(!1);return l.useEffect(()=>{const d=window.matchMedia(`(max-width: ${c}px)`);r(d.matches);const g=u=>r(u.matches);return d.addEventListener("change",g),()=>d.removeEventListener("change",g)},[c]),v}const J={fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"};function ee(){const[c,v]=l.useState("osi"),[r,d]=l.useState("idle"),[g,u]=l.useState(-1),[i,S]=l.useState(null),[P,R]=l.useState(50),[h,b]=l.useState([]),p=q(),y=c==="osi"?D:H,x=l.useCallback(()=>{d("idle"),u(-1),b([]),S(null)},[]),I=l.useCallback(async()=>{const t=c==="osi"?D:H,n=Math.max(200,1200-P*10);d("encapsulating"),b([]);for(let a=0;a<t.length;a++)u(a),b(o=>[...o,t[a].adds]),await new Promise(o=>setTimeout(o,n));d("transit"),u(-1),await new Promise(a=>setTimeout(a,n*1.5)),d("decapsulating");for(let a=t.length-1;a>=0;a--)u(a),b(o=>o.slice(0,-1)),await new Promise(o=>setTimeout(o,n));d("done"),u(-1)},[c,P]),A=l.useCallback(()=>{r!=="idle"&&r!=="done"||(x(),setTimeout(()=>I(),50))},[r,x,I]),z={border:"1px solid var(--sl-color-gray-5)",borderRadius:"12px",padding:"1.25rem",fontFamily:"system-ui, sans-serif",color:"var(--sl-color-gray-1, #e2e8f0)",background:"var(--sl-color-gray-6)",overflow:"hidden"},W={fontSize:p?"1rem":"1.2rem",fontWeight:700,marginBottom:"1rem",textAlign:"center"},B={display:"flex",flexWrap:"wrap",gap:"0.5rem",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},j=(t,n=!1)=>({padding:"0.4rem 0.9rem",borderRadius:"6px",border:"none",background:n?"var(--sl-color-gray-5)":t,color:"#fff",fontWeight:600,fontSize:"0.8rem",cursor:n?"not-allowed":"pointer",opacity:n?.5:1,transition:"opacity 0.15s"}),T=t=>({...j(t?"#0066cc":"var(--sl-color-gray-5)"),opacity:1,cursor:"pointer"}),E={display:"flex",flexDirection:p?"column":"row",gap:"1rem",alignItems:"stretch"},U={flex:1,minWidth:0},M=(t,n,a)=>{const o=r==="encapsulating"&&a==="sender"&&n===g||r==="decapsulating"&&a==="receiver"&&n===g;return{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.45rem 0.6rem",borderRadius:"6px",border:`2px solid ${o?t.color:"transparent"}`,background:o?`${t.color}22`:"var(--sl-color-gray-5)",cursor:"pointer",transition:"all 0.25s",marginBottom:"0.3rem",boxShadow:o?`0 0 12px ${t.color}55`:"none"}},$=t=>({width:"1.6rem",height:"1.6rem",borderRadius:"50%",background:t,color:"#fff",fontWeight:700,fontSize:"0.72rem",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}),F={fontWeight:600,fontSize:"0.78rem",lineHeight:1.2},N={fontSize:"0.65rem",color:"var(--sl-color-gray-3)",lineHeight:1.2},G={margin:"1rem 0",padding:"0.75rem",borderRadius:"8px",background:"var(--sl-color-gray-5)",minHeight:"3.5rem",display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",gap:"0.2rem"},w=t=>({padding:"0.2rem 0.5rem",borderRadius:"4px",background:`${t}33`,border:`1px solid ${t}`,fontSize:"0.65rem",fontWeight:600,color:t,whiteSpace:"nowrap"}),O={marginTop:"1rem",padding:"0.9rem",borderRadius:"8px",background:"var(--sl-color-gray-5)",border:"1px solid var(--sl-color-gray-5)"},V={fontSize:"0.9rem",fontWeight:700,marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},f={fontSize:"0.75rem",marginBottom:"0.3rem",lineHeight:1.5,color:"var(--sl-color-gray-3)"},C=t=>e.jsxs("div",{style:U,children:[e.jsx("div",{style:J,children:t==="sender"?"Sender (Encapsulation)":"Receiver (Decapsulation)"}),y.map((n,a)=>e.jsxs(m.div,{style:M(n,a,t),onClick:()=>S(i?.num===n.num?null:n),whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,x:t==="sender"?-20:20},animate:{opacity:1,x:0},transition:{delay:a*.05},children:[e.jsx("div",{style:$(n.color),children:n.num}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:F,children:n.name}),e.jsx("div",{style:N,children:n.protocols})]}),e.jsx("div",{style:{fontSize:"0.6rem",color:"var(--sl-color-gray-3)",textAlign:"right"},children:n.dataUnit})]},`${c}-${t}-${n.num}`))]}),k=y.map(t=>t.color),Y=()=>r==="idle"?e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:'Click "Send Data" to start encapsulation'}):r==="done"?e.jsx(m.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:{fontSize:"0.8rem",fontWeight:600,color:"#10b981"},children:"Data delivered successfully!"}):r==="transit"?e.jsxs(m.div,{style:{display:"flex",alignItems:"center",gap:"0.4rem"},animate:{x:[0,10,-10,0]},transition:{repeat:1/0,duration:.8},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#f59e0b"},children:"Transmitting across network..."}),h.map((t,n)=>e.jsx("span",{style:w(k[n]||"#888"),children:t},n))]}):e.jsxs(L,{mode:"popLayout",children:[h.length>0&&[...h].reverse().map((t,n)=>{const a=h.length-1-n;return e.jsx(m.span,{style:w(k[a]||"#888"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.25},children:t},`${t}-${a}`)}),e.jsx(m.span,{style:{padding:"0.25rem 0.6rem",borderRadius:"4px",background:"#0066cc44",border:"1px solid #0066cc",fontSize:"0.7rem",fontWeight:700,color:"#0066cc"},layout:!0,children:"DATA"},"payload"),r==="encapsulating"&&h.length>=y.length-1&&e.jsx(m.span,{style:w(k[y.length-1]||"#888"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:"Trailer"},"trailer")]}),_=()=>{switch(r){case"idle":return"Ready";case"encapsulating":return`Encapsulating at Layer ${y[g]?.name??""}`;case"transit":return"In Transit";case"decapsulating":return`Decapsulating at Layer ${y[g]?.name??""}`;case"done":return"Delivered"}},s=r==="encapsulating"||r==="transit"||r==="decapsulating";return e.jsxs("div",{style:z,children:[e.jsxs("div",{style:W,children:[c==="osi"?"OSI Model":"TCP/IP Model"," — Packet Encapsulation"]}),e.jsxs("div",{style:B,children:[e.jsx("button",{style:T(c==="osi"),onClick:()=>{s||(v("osi"),x())},children:"OSI (7 Layers)"}),e.jsx("button",{style:T(c==="tcpip"),onClick:()=>{s||(v("tcpip"),x())},children:"TCP/IP (4 Layers)"}),e.jsx("span",{style:{width:"1px",height:"1.4rem",background:"var(--sl-color-gray-5)",margin:"0 0.2rem"}}),e.jsx("button",{style:j("#10b981",s),onClick:A,disabled:s,children:"Send Data"}),e.jsx("button",{style:j("#ef4444",s),onClick:x,disabled:s,children:"Reset"}),e.jsx("span",{style:{width:"1px",height:"1.4rem",background:"var(--sl-color-gray-5)",margin:"0 0.2rem"}}),e.jsxs("label",{style:{fontSize:"0.72rem",display:"flex",alignItems:"center",gap:"0.35rem",color:"var(--sl-color-gray-3)"},children:["Speed",e.jsx("input",{type:"range",min:10,max:100,value:P,onChange:t=>R(Number(t.target.value)),disabled:s,style:{width:"5rem",accentColor:"#0066cc"}})]})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"0.5rem",fontSize:"0.75rem",fontWeight:600,color:s?"#f59e0b":r==="done"?"#10b981":"var(--sl-color-gray-3)"},children:_()}),e.jsx("div",{style:G,children:Y()}),e.jsxs("div",{style:E,children:[C("sender"),e.jsxs("div",{style:{display:"flex",flexDirection:p?"row":"column",alignItems:"center",justifyContent:"center",gap:"0.4rem",padding:"0 0.3rem",minWidth:p?void 0:"2.5rem"},children:[e.jsx(m.div,{animate:s?{opacity:[.4,1,.4]}:{opacity:.5},transition:{repeat:1/0,duration:1.2},style:{fontSize:"1.2rem"},children:p?r==="decapsulating"?"↑":"↓":r==="decapsulating"?"←":"→"}),e.jsx("div",{style:{width:p?"3rem":"2px",height:p?"2px":"3rem",background:s?"#f59e0b":"var(--sl-color-gray-5)",transition:"background 0.3s"}}),e.jsx(m.div,{animate:s?{opacity:[.4,1,.4]}:{opacity:.5},transition:{repeat:1/0,duration:1.2,delay:.4},style:{fontSize:"1.2rem"},children:p?r==="decapsulating"?"↑":"↓":r==="decapsulating"?"←":"→"})]}),C("receiver")]}),e.jsx(L,{children:i&&e.jsxs(m.div,{style:O,initial:{opacity:0,y:10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},transition:{duration:.25},children:[e.jsxs("div",{style:V,children:[e.jsx("span",{style:{width:"1.4rem",height:"1.4rem",borderRadius:"50%",background:i.color,color:"#fff",fontWeight:700,fontSize:"0.7rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.num}),"Layer ",i.num,": ",i.name]}),e.jsx("div",{style:f,children:i.description}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.3rem 1rem",marginTop:"0.5rem"},children:[e.jsxs("div",{style:f,children:[e.jsx("strong",{children:"Protocols:"})," ",i.protocols]}),e.jsxs("div",{style:f,children:[e.jsx("strong",{children:"Data Unit:"})," ",i.dataUnit]}),e.jsxs("div",{style:f,children:[e.jsx("strong",{children:"Devices:"})," ",i.devices]}),e.jsxs("div",{style:f,children:[e.jsx("strong",{children:"Adds:"})," ",i.adds]})]}),e.jsx("button",{onClick:()=>S(null),style:{marginTop:"0.5rem",padding:"0.25rem 0.6rem",borderRadius:"4px",border:"1px solid var(--sl-color-gray-5)",background:"transparent",color:"var(--sl-color-gray-3)",fontSize:"0.7rem",cursor:"pointer"},children:"Close"})]},i.num)})]})}export{ee as default};
