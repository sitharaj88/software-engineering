import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as a}from"./index.DK-fsZOb.js";import{A as R}from"./index.CMzh-1wI.js";import{m as h}from"./proxy.i6brGrIQ.js";function I(t=640){const[n,b]=a.useState(!1);return a.useEffect(()=>{const i=window.matchMedia(`(max-width: ${t}px)`);b(i.matches);const x=v=>b(v.matches);return i.addEventListener("change",x),()=>i.removeEventListener("change",x)},[t]),n}const d=[{type:"map",label:"x * 2",description:"Double each value",fn:t=>t.map(n=>n*2),color:"#3b82f6",icon:"f(x)"},{type:"map",label:"x + 10",description:"Add 10 to each",fn:t=>t.map(n=>n+10),color:"#3b82f6",icon:"f(x)"},{type:"map",label:"x²",description:"Square each value",fn:t=>t.map(n=>n*n),color:"#3b82f6",icon:"f(x)"},{type:"map",label:"toUpperCase",description:"Uppercase strings",fn:t=>t.map(n=>typeof n=="string"?n.toUpperCase():n),color:"#3b82f6",icon:"f(x)"},{type:"filter",label:"even",description:"Keep even numbers",fn:t=>t.filter(n=>n%2===0),color:"#10b981",icon:"?"},{type:"filter",label:"> 10",description:"Keep values > 10",fn:t=>t.filter(n=>n>10),color:"#10b981",icon:"?"},{type:"filter",label:"odd",description:"Keep odd numbers",fn:t=>t.filter(n=>n%2!==0),color:"#10b981",icon:"?"},{type:"filter",label:"len > 3",description:"Keep strings longer than 3",fn:t=>t.filter(n=>typeof n=="string"?n.length>3:!0),color:"#10b981",icon:"?"},{type:"reduce",label:"sum",description:"Sum all values",fn:t=>[t.reduce((n,b)=>n+b,0)],color:"#f59e0b",icon:"Σ"},{type:"reduce",label:"max",description:"Find maximum",fn:t=>[t.length?Math.max(...t):0],color:"#f59e0b",icon:"Σ"},{type:"reduce",label:"join",description:"Join into string",fn:t=>[t.join(", ")],color:"#f59e0b",icon:"Σ"},{type:"flatMap",label:"[x, x*2]",description:"Duplicate & double",fn:t=>t.flatMap(n=>[n,n*2]),color:"#8b5cf6",icon:"⊕"},{type:"flatMap",label:"split chars",description:"Split strings to chars",fn:t=>t.flatMap(n=>typeof n=="string"?n.split(""):[n]),color:"#8b5cf6",icon:"⊕"}],w=[{name:"Double & Filter Even",description:"Double all numbers, then keep only even results",input:[1,2,3,4,5,6,7,8],ops:[d[0],d[4],d[8]]},{name:"Word Count Pipeline",description:"Process words: uppercase, filter long words, join",input:["the","quick","brown","fox","jumps","over","lazy","dog"],ops:[d[3],d[7],d[10]]},{name:"Student Grade Pipeline",description:"Square scores, filter passing (>10), find max",input:[1,2,3,4,5,6],ops:[d[2],d[5],d[9]]}];function _(){const t=I(),[n,b]=a.useState(0),[i,x]=a.useState(w[0].ops),[v,T]=a.useState(w[0].input),[l,u]=a.useState(-1),[c,p]=a.useState("idle"),[W,B]=a.useState(50),[j,$]=a.useState(!1),m=a.useRef(null),S=a.useRef(!1),g=a.useCallback(()=>{const r=[{op:null,data:v}];let o=[...v];for(const s of i)if(s.type==="filter"){const f=new Map;o.forEach((C,k)=>{const y=s.fn([C]).length>0;f.set(k,y)}),o=s.fn(o),r.push({op:s,data:o,filtered:f})}else o=s.fn(o),r.push({op:s,data:o});return r},[v,i])(),P=a.useCallback(r=>{S.current=!0,m.current&&clearTimeout(m.current),b(r),x(w[r].ops),T(w[r].input),u(-1),p("idle"),$(!1)},[]),A=a.useCallback(()=>{u(r=>{const o=r+1;return o>=i.length?(p("done"),i.length-1):o})},[i.length]),M=a.useCallback(()=>{u(r=>r<=0?-1:r-1),p("idle")},[]),E=a.useCallback(()=>{S.current=!1,p("playing");const r=Math.max(400,2e3-W*18),o=s=>{if(!S.current){if(s>=i.length){u(i.length-1),p("done");return}u(s),m.current=window.setTimeout(()=>o(s+1),r)}};o(l<0?0:l+1)},[l,i.length,W]),F=a.useCallback(()=>{S.current=!0,m.current&&clearTimeout(m.current),p("paused")},[]),D=a.useCallback(()=>{S.current=!0,m.current&&clearTimeout(m.current),u(-1),p("idle")},[]),L=a.useCallback(r=>{x(o=>[...o,r]),u(-1),p("idle")},[]),q=a.useCallback(r=>{x(o=>o.filter((s,f)=>f!==r)),u(-1),p("idle")},[]);a.useEffect(()=>()=>{S.current=!0,m.current&&clearTimeout(m.current)},[]);const H={map:"#3b82f6",filter:"#10b981",reduce:"#f59e0b",flatMap:"#8b5cf6"},z=r=>typeof r=="string"?`"${r}"`:String(r);return e.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"0.75rem",overflow:"hidden",margin:"1.5rem 0"},children:[e.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Functional Pipeline Visualizer"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--sl-color-gray-3)"},children:"Watch data flow through map, filter, reduce, and flatMap operations"})]}),e.jsxs("div",{style:{padding:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap",marginBottom:"1rem"},children:[w.map((r,o)=>e.jsx("button",{onClick:()=>P(o),style:{padding:"0.5rem 0.9rem",borderRadius:6,minHeight:44,border:n===o?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:n===o?"#0066cc":"transparent",color:n===o?"#fff":"var(--sl-color-text)",cursor:"pointer",fontSize:"0.82rem",fontWeight:600,transition:"all 0.15s"},children:r.name},r.name)),e.jsx("button",{onClick:()=>$(!j),style:{padding:"0.5rem 0.9rem",borderRadius:6,minHeight:44,border:j?"2px solid #8b5cf6":"1px solid var(--sl-color-gray-4)",background:j?"#8b5cf6":"transparent",color:j?"#fff":"var(--sl-color-text)",cursor:"pointer",fontSize:"0.82rem",fontWeight:600,transition:"all 0.15s"},children:"+ Build Custom"})]}),e.jsx("p",{style:{fontSize:"0.82rem",color:"var(--sl-color-gray-3)",margin:"0 0 1rem"},children:w[n].description}),e.jsx(R,{children:j&&e.jsx(h.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden",marginBottom:"1rem"},children:e.jsxs("div",{style:{background:"var(--sl-color-gray-7)",borderRadius:"0.5rem",padding:"1rem",border:"1px solid var(--sl-color-gray-5)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Add Operations"}),["map","filter","reduce","flatMap"].map(r=>e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.72rem",fontWeight:700,color:H[r],textTransform:"uppercase"},children:r}),e.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap",marginTop:"0.25rem"},children:d.filter(o=>o.type===r).map((o,s)=>e.jsxs("button",{onClick:()=>L(o),title:o.description,style:{height:"1.75rem",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"999px",padding:"0 0.7rem",border:`1px solid ${o.color}44`,background:`${o.color}15`,color:o.color,cursor:"pointer",fontSize:"0.72rem",fontWeight:600,transition:"all 0.15s"},children:[o.icon," ",o.label]},`${r}-${s}`))})]},r))]})})}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:"Pipeline Chain"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",flexWrap:"wrap"},children:[e.jsx("span",{style:{background:"var(--sl-color-gray-5)",padding:"0.25rem 0.6rem",borderRadius:"6px",fontSize:"0.78rem",fontWeight:600},children:"data"}),i.map((r,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[e.jsx("span",{style:{color:"var(--sl-color-gray-4)",fontSize:"0.9rem"},children:"."}),e.jsxs(h.span,{layout:!0,style:{background:l>=o?`${r.color}25`:"var(--sl-color-gray-5)",border:l===o?`2px solid ${r.color}`:"1px solid transparent",padding:"0.25rem 0.6rem",borderRadius:"6px",fontSize:"0.78rem",fontWeight:600,color:l>=o?r.color:"var(--sl-color-text)",display:"inline-flex",alignItems:"center",gap:"0.3rem",boxShadow:l===o?`0 0 8px ${r.color}44`:"none",transition:"all 0.3s"},children:[".",r.type,"(",r.label,")",j&&e.jsx("button",{onClick:()=>q(o),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0 0.15rem",fontSize:"0.85rem",fontWeight:700,lineHeight:1},title:"Remove operation",children:"x"})]})]},o))]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap",marginBottom:"1.25rem"},children:[e.jsx("button",{onClick:M,disabled:l<0||c==="playing",style:{padding:"0.4rem 0.9rem",borderRadius:6,border:"none",background:l<0||c==="playing"?"var(--sl-color-gray-5)":"#0066cc",color:"#fff",fontWeight:600,fontSize:"0.8rem",cursor:l<0||c==="playing"?"not-allowed":"pointer",opacity:l<0||c==="playing"?.5:1},children:"Step Back"}),c==="playing"?e.jsx("button",{onClick:F,style:{padding:"0.4rem 0.9rem",borderRadius:6,border:"none",background:"#f59e0b",color:"#fff",fontWeight:600,fontSize:"0.8rem",cursor:"pointer"},children:"Pause"}):e.jsx("button",{onClick:E,disabled:c==="done",style:{padding:"0.4rem 0.9rem",borderRadius:6,border:"none",background:c==="done"?"var(--sl-color-gray-5)":"#10b981",color:"#fff",fontWeight:600,fontSize:"0.8rem",cursor:c==="done"?"not-allowed":"pointer",opacity:c==="done"?.5:1},children:l>=0?"Resume":"Auto Play"}),e.jsx("button",{onClick:A,disabled:l>=i.length-1||c==="playing",style:{padding:"0.4rem 0.9rem",borderRadius:6,border:"none",background:l>=i.length-1||c==="playing"?"var(--sl-color-gray-5)":"#0066cc",color:"#fff",fontWeight:600,fontSize:"0.8rem",cursor:l>=i.length-1||c==="playing"?"not-allowed":"pointer",opacity:l>=i.length-1||c==="playing"?.5:1},children:"Step Forward"}),e.jsx("button",{onClick:D,style:{padding:"0.4rem 0.9rem",borderRadius:6,border:"none",background:"var(--sl-color-gray-5)",color:"var(--sl-color-text)",fontWeight:600,fontSize:"0.8rem",cursor:"pointer"},children:"Reset"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--sl-color-gray-3)"},children:"Speed"}),e.jsx("input",{type:"range",min:10,max:100,value:W,onChange:r=>B(+r.target.value),style:{width:t?60:80}})]})]}),e.jsx("div",{style:{background:"var(--sl-color-gray-7)",borderRadius:"0.5rem",padding:"1rem",border:"1px solid var(--sl-color-gray-5)"},children:e.jsx("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"0.75rem",overflowX:"auto"},children:g.map((r,o)=>{const s=o===0||o<=l+1,f=o===l+1,C=o>0?g[o-1]:null;return e.jsxs("div",{style:{display:"flex",alignItems:t?"flex-start":"center",gap:"0.5rem",flexDirection:t?"column":"row"},children:[e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:s?1:.3,scale:s?1:.95},transition:{duration:.3},style:{minWidth:t?"100%":140,background:f?`${r.op?.color||"#6b7280"}12`:"var(--sl-color-gray-6)",border:f?`2px solid ${r.op?.color||"#6b7280"}`:"1px solid var(--sl-color-gray-5)",borderRadius:"0.5rem",padding:"0.75rem",boxShadow:f?`0 0 12px ${r.op?.color||"#6b7280"}33`:"none",transition:"all 0.3s"},children:[e.jsx("div",{style:{fontSize:"0.68rem",fontWeight:700,color:r.op?.color||"var(--sl-color-gray-3)",textTransform:"uppercase",marginBottom:"0.4rem",textAlign:"center"},children:o===0?"Input":`.${r.op.type}(${r.op.label})`}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",justifyContent:"center",minHeight:"2rem"},children:e.jsx(R,{mode:"popLayout",children:s&&r.data.map((k,y)=>e.jsx(h.span,{initial:{opacity:0,y:-10,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.25,delay:y*.05},style:{display:"inline-block",padding:"0.2rem 0.45rem",borderRadius:"4px",fontSize:"0.72rem",fontFamily:"monospace",fontWeight:600,background:r.op?.type==="reduce"?"#f59e0b22":"#3b82f622",color:r.op?.type==="reduce"?"#f59e0b":"var(--sl-color-text)",border:`1px solid ${r.op?.type==="reduce"?"#f59e0b44":"#3b82f644"}`},children:z(k)},`${o}-${y}-${k}`))})}),r.filtered&&s&&e.jsxs("div",{style:{marginTop:"0.4rem",borderTop:"1px dashed var(--sl-color-gray-5)",paddingTop:"0.3rem"},children:[e.jsx("div",{style:{fontSize:"0.62rem",color:"#ef4444",fontWeight:600,marginBottom:"0.2rem",textAlign:"center"},children:"Filtered out:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.2rem",justifyContent:"center"},children:C&&C.data.map((k,y)=>r.filtered.get(y)?null:e.jsx(h.span,{initial:{opacity:1},animate:{opacity:.5},style:{display:"inline-block",padding:"0.15rem 0.35rem",borderRadius:"4px",fontSize:"0.65rem",fontFamily:"monospace",background:"#ef444422",color:"#ef4444",textDecoration:"line-through"},children:z(k)},`filtered-${y}`))})]}),e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--sl-color-gray-3)",textAlign:"center",marginTop:"0.3rem"},children:s?`${r.data.length} item${r.data.length!==1?"s":""}`:"..."})]}),o<g.length-1&&e.jsx("div",{style:{color:"var(--sl-color-gray-4)",fontSize:"1.2rem",transform:t?"rotate(90deg)":"none",flexShrink:0,textAlign:"center",width:t?"100%":"auto"},children:s&&f?e.jsx(h.span,{animate:{x:[0,5,0]},transition:{duration:.8,repeat:1/0},children:"→"}):"→"})]},o)})})}),e.jsx(R,{mode:"wait",children:l>=0&&e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{marginTop:"1rem",padding:"0.75rem 1rem",background:`${i[l]?.color||"#6b7280"}12`,border:`1px solid ${i[l]?.color||"#6b7280"}44`,borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:700,color:i[l]?.color||"var(--sl-color-text)",marginBottom:"0.25rem"},children:["Step ",l+1,": .",i[l]?.type,"(",i[l]?.label,")"]}),e.jsxs("div",{style:{fontSize:"0.78rem",color:"var(--sl-color-gray-2)"},children:[i[l]?.description,"."," ",g[l+1]&&e.jsxs("span",{children:[g[l].data.length," items ","→"," ",g[l+1].data.length," items"]})]}),e.jsxs("div",{style:{fontSize:"0.72rem",color:"var(--sl-color-gray-3)",fontFamily:"monospace",marginTop:"0.3rem"},children:["[",g[l].data.map(z).join(", "),"] ","→"," [",g[l+1]?.data.map(z).join(", "),"]"]})]},l)}),e.jsxs("div",{style:{marginTop:"1rem",background:"var(--sl-color-gray-7)",borderRadius:"0.5rem",padding:"0.75rem 1rem",border:"1px solid var(--sl-color-gray-5)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.4rem"},children:"Code Equivalent"}),e.jsx("pre",{style:{margin:0,fontSize:"0.78rem",fontFamily:"'Fira Code', 'Cascadia Code', monospace', monospace",overflowX:"auto",lineHeight:1.6},children:e.jsxs("code",{children:[e.jsx("span",{style:{color:"#c678dd"},children:"const"})," ",e.jsx("span",{style:{color:"#61afef"},children:"result"})," ",e.jsx("span",{style:{color:"var(--sl-color-gray-3)"},children:"="})," [",v.map(z).join(", "),"]",`
`,i.map((r,o)=>e.jsxs("span",{children:["  ",e.jsxs("span",{style:{color:l>=o?r.color:"var(--sl-color-gray-4)"},children:[".",r.type]}),e.jsx("span",{style:{color:"var(--sl-color-gray-3)"},children:"("}),e.jsx("span",{style:{color:"#98c379"},children:r.label}),e.jsx("span",{style:{color:"var(--sl-color-gray-3)"},children:")"}),o<i.length-1?`
`:";"]},o))]})})]})]})]})}export{_ as default};
