import{j as a}from"./jsx-runtime.ClP7wGfN.js";import{r as p}from"./index.DK-fsZOb.js";const $=20,k=35,O={bfs:{name:"BFS",guarantees:"Shortest path (unweighted)",weighted:!1},dfs:{name:"DFS",guarantees:"Finds a path (not necessarily shortest)",weighted:!1},dijkstra:{name:"Dijkstra's",guarantees:"Shortest path (weighted)",weighted:!0},astar:{name:"A* Search",guarantees:"Shortest path (weighted, with heuristic)",weighted:!0}},V={empty:"transparent",wall:"#374151",start:"#10b981",end:"#ef4444",visited:"#0066cc40",path:"#f59e0b",current:"#8b5cf6"};function A(){const g=Array.from({length:$},()=>Array(k).fill("empty"));return g[Math.floor($/2)][5]="start",g[Math.floor($/2)][k-6]="end",g}function ee(){const[g,y]=p.useState(A),[S,B]=p.useState("bfs"),[m,L]=p.useState(!1),[w,N]=p.useState("wall"),[R,v]=p.useState({visited:0,pathLength:0}),[U,C]=p.useState(!1),b=p.useRef(!1),z=p.useRef(!1),x=e=>{for(let t=0;t<$;t++)for(let r=0;r<k;r++)if(g[t][r]===e)return[t,r];return null},F=p.useCallback(()=>{y(e=>e.map(t=>t.map(r=>r==="visited"||r==="path"||r==="current"?"empty":r))),v({visited:0,pathLength:0}),C(!1)},[]),_=p.useCallback(()=>{b.current=!0,setTimeout(()=>{b.current=!1,y(A()),v({visited:0,pathLength:0}),L(!1),C(!1)},50)},[]),q=p.useCallback(()=>{const e=A();for(let t=0;t<$;t++)for(let r=0;r<k;r++)e[t][r]==="empty"&&Math.random()<.3&&(e[t][r]="wall");y(e),v({visited:0,pathLength:0}),C(!1)},[]),E=p.useCallback((e,t)=>{m||y(r=>{const s=r.map(n=>[...n]);if(w==="start"){const n=x("start");n&&(s[n[0]][n[1]]="empty"),s[e][t]="start"}else if(w==="end"){const n=x("end");n&&(s[n[0]][n[1]]="empty"),s[e][t]="end"}else w==="erase"?s[e][t]!=="start"&&s[e][t]!=="end"&&(s[e][t]="empty"):s[e][t]==="empty"?s[e][t]="wall":s[e][t]==="wall"&&(s[e][t]="empty");return s})},[m,w,g]),M=()=>new Promise(e=>setTimeout(e,15)),W=(e,t)=>[[0,1],[1,0],[0,-1],[-1,0]].map(([s,n])=>[e+s,t+n]).filter(([s,n])=>s>=0&&s<$&&n>=0&&n<k),I=async(e,t)=>{const r=[];let s=`${t[0]},${t[1]}`;for(;e.has(s);){const[n,f]=s.split(",").map(Number);r.unshift([n,f]),s=e.get(s)}for(const[n,f]of r){if(b.current)return;y(l=>{const d=l.map(i=>[...i]);return d[n][f]!=="start"&&d[n][f]!=="end"&&(d[n][f]="path"),d}),await M()}v(n=>({...n,pathLength:r.length}))},X=async()=>{const e=x("start"),t=x("end");if(!e||!t)return;const r=[e],s=new Set([`${e[0]},${e[1]}`]),n=new Map;let f=0;for(;r.length>0;){if(b.current)return;const[l,d]=r.shift();if(f++,v(i=>({...i,visited:f})),l===t[0]&&d===t[1])return await I(n,t),!0;y(i=>{const o=i.map(c=>[...c]);return o[l][d]!=="start"&&(o[l][d]="visited"),o}),await M();for(const[i,o]of W(l,d)){const c=`${i},${o}`;!s.has(c)&&g[i][o]!=="wall"&&(s.add(c),n.set(c,`${l},${d}`),r.push([i,o]))}}return!1},J=async()=>{const e=x("start"),t=x("end");if(!e||!t)return;const r=[e],s=new Set([`${e[0]},${e[1]}`]),n=new Map;let f=0;for(;r.length>0;){if(b.current)return;const[l,d]=r.pop();if(f++,v(i=>({...i,visited:f})),l===t[0]&&d===t[1])return await I(n,t),!0;y(i=>{const o=i.map(c=>[...c]);return o[l][d]!=="start"&&(o[l][d]="visited"),o}),await M();for(const[i,o]of W(l,d)){const c=`${i},${o}`;!s.has(c)&&g[i][o]!=="wall"&&(s.add(c),n.set(c,`${l},${d}`),r.push([i,o]))}}return!1},G=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),T=async e=>{const t=x("start"),r=x("end");if(!t||!r)return;const s=new Map,n=new Map,f=new Map,l=[t],d=new Set;let i=0;for(s.set(`${t[0]},${t[1]}`,0),n.set(`${t[0]},${t[1]}`,e?G(t,r):0);l.length>0;){if(b.current)return;l.sort((u,h)=>(n.get(`${u[0]},${u[1]}`)||1/0)-(n.get(`${h[0]},${h[1]}`)||1/0));const[o,c]=l.shift(),P=`${o},${c}`;if(i++,v(u=>({...u,visited:i})),o===r[0]&&c===r[1])return await I(f,r),!0;d.add(P),y(u=>{const h=u.map(j=>[...j]);return h[o][c]!=="start"&&(h[o][c]="visited"),h}),await M();for(const[u,h]of W(o,c)){const j=`${u},${h}`;if(d.has(j)||g[u][h]==="wall")continue;const D=(s.get(P)||0)+1;D<(s.get(j)||1/0)&&(f.set(j,P),s.set(j,D),n.set(j,D+(e?G([u,h],r):0)),l.find(([Q,Y])=>Q===u&&Y===h)||l.push([u,h]))}}return!1},K=p.useCallback(async()=>{switch(F(),L(!0),C(!1),b.current=!1,await new Promise(e=>setTimeout(e,100)),S){case"bfs":await X();break;case"dfs":await J();break;case"dijkstra":await T(!1);break;case"astar":await T(!0);break}b.current||C(!0),L(!1)},[S,g]);return a.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"0.75rem",overflow:"hidden",margin:"1.5rem 0"},children:[a.jsx("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Pathfinding Visualizer"}),a.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:O[S].guarantees})]}),a.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:Object.keys(O).map(e=>a.jsx("button",{onClick:()=>!m&&B(e),disabled:m,style:{padding:"0.3rem 0.7rem",borderRadius:"0.375rem",border:S===e?"2px solid #0066cc":"1px solid var(--sl-color-gray-4)",background:S===e?"#0066cc":"transparent",color:S===e?"#fff":"var(--sl-color-text)",cursor:m?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:600},children:O[e].name},e))})]})}),a.jsxs("div",{style:{padding:"0.5rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",display:"flex",gap:"0.4rem",flexWrap:"wrap",alignItems:"center"},children:[a.jsx("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-3)",marginRight:"0.25rem"},children:"Draw:"}),[["wall","Wall","#374151"],["start","Start","#10b981"],["end","End","#ef4444"],["erase","Erase","#6b7280"]].map(([e,t,r])=>a.jsx("button",{onClick:()=>N(e),style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",border:w===e?`2px solid ${r}`:"1px solid var(--sl-color-gray-4)",background:w===e?`${r}20`:"transparent",color:w===e?r:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.7rem",fontWeight:600},children:t},e))]}),a.jsx("div",{style:{padding:"0.75rem",overflowX:"auto"},onMouseLeave:()=>{z.current=!1},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${k}, 1fr)`,gap:1,maxWidth:700,margin:"0 auto"},children:g.map((e,t)=>e.map((r,s)=>a.jsxs("div",{onMouseDown:()=>{z.current=!0,E(t,s)},onMouseUp:()=>{z.current=!1},onMouseEnter:()=>{z.current&&E(t,s)},style:{aspectRatio:"1",borderRadius:2,cursor:m?"default":"pointer",background:V[r],border:r==="empty"?"1px solid var(--sl-color-gray-5)":"none",transition:"background 0.15s",fontSize:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:[r==="start"&&"▶",r==="end"&&"◎"]},`${t}-${s}`)))})}),a.jsxs("div",{style:{padding:"0.75rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:K,disabled:m,style:{padding:"0.5rem 1.2rem",borderRadius:"0.375rem",border:"none",background:"#10b981",color:"#fff",cursor:m?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem"},children:m?"⏳ Running...":"▶ Visualize"}),a.jsx("button",{onClick:F,disabled:m,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"Clear Path"}),a.jsx("button",{onClick:q,disabled:m,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"Random Maze"}),a.jsx("button",{onClick:_,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid var(--sl-color-gray-4)",background:"transparent",color:"var(--sl-color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"↺ Reset"})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem"},children:[a.jsxs("span",{children:["Cells Visited: ",a.jsx("strong",{children:R.visited})]}),a.jsxs("span",{children:["Path Length: ",a.jsx("strong",{children:R.pathLength||"–"})]}),U&&a.jsx("span",{style:{color:R.pathLength>0?"#10b981":"#ef4444",fontWeight:700},children:R.pathLength>0?"Path Found!":"No Path"})]})]}),a.jsx("div",{style:{padding:"0.5rem 1.25rem",borderTop:"1px solid var(--sl-color-gray-5)",display:"flex",gap:"1rem",flexWrap:"wrap",fontSize:"0.72rem"},children:Object.entries(V).filter(([e])=>e!=="current").map(([e,t])=>a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.jsx("span",{style:{width:12,height:12,borderRadius:2,background:t||"var(--sl-color-gray-5)",border:t==="transparent"?"1px solid var(--sl-color-gray-4)":"none",display:"inline-block"}}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})}export{ee as default};
