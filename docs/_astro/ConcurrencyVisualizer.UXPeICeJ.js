import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as l}from"./index.DK-fsZOb.js";import{A as $}from"./index.CMzh-1wI.js";import{m as v}from"./proxy.i6brGrIQ.js";const t={blue:"#0066cc",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899"},oe={thinking:"var(--sl-color-gray-4)",hungry:t.yellow,eating:t.green,waiting:t.red},ke=[{key:"race",label:"Race Condition"},{key:"deadlock",label:"Deadlock"},{key:"producer-consumer",label:"Producer-Consumer"},{key:"philosophers",label:"Dining Philosophers"}];function ve(a=640){const[c,E]=l.useState(!1);return l.useEffect(()=>{const W=window.matchMedia(`(max-width: ${a}px)`);E(W.matches);const g=x=>E(x.matches);return W.addEventListener("change",g),()=>W.removeEventListener("change",g)},[a]),c}function je(a){return a?[{threadA:"Acquire lock",threadB:"Waiting...",shared:0,description:"Thread A acquires the mutex lock.",highlight:"A"},{threadA:"Read value (0)",threadB:"Waiting...",shared:0,description:"Thread A reads the shared counter. Thread B is blocked.",highlight:"A"},{threadA:"Increment to 1",threadB:"Waiting...",shared:0,description:"Thread A computes new value: 0 + 1 = 1.",highlight:"A"},{threadA:"Write value (1)",threadB:"Waiting...",shared:1,description:"Thread A writes 1 back to the shared counter.",highlight:"A"},{threadA:"Release lock",threadB:"Acquire lock",shared:1,description:"Thread A releases lock. Thread B now acquires it.",highlight:"both"},{threadA:"Done",threadB:"Read value (1)",shared:1,description:"Thread B reads the updated counter value of 1.",highlight:"B"},{threadA:"Done",threadB:"Increment to 2",shared:1,description:"Thread B computes new value: 1 + 1 = 2.",highlight:"B"},{threadA:"Done",threadB:"Write value (2)",shared:2,description:"Thread B writes 2. Final value is correct!",highlight:"B"}]:[{threadA:"Read value (0)",threadB:"Idle",shared:0,description:"Thread A reads the shared counter value of 0.",highlight:"A"},{threadA:"Read value (0)",threadB:"Read value (0)",shared:0,description:"Thread B also reads 0 before A writes back!",highlight:"B",isError:!0},{threadA:"Increment to 1",threadB:"...",shared:0,description:"Thread A computes 0 + 1 = 1 locally.",highlight:"A"},{threadA:"Write value (1)",threadB:"...",shared:1,description:"Thread A writes 1 back to the counter.",highlight:"A"},{threadA:"Done",threadB:"Increment to 1",shared:1,description:"Thread B still has stale value 0, computes 0 + 1 = 1.",highlight:"B",isError:!0},{threadA:"Done",threadB:"Write value (1)",shared:1,description:"Thread B overwrites with 1. One increment is lost!",highlight:"B",isError:!0}]}function Se(a){return a?[{aHolds:null,aWants:"Lock 1",bHolds:null,bWants:null,description:"Both threads use consistent lock ordering: always Lock 1 first, then Lock 2.",isDeadlock:!1},{aHolds:"Lock 1",aWants:null,bHolds:null,bWants:"Lock 1",description:"Thread A acquires Lock 1. Thread B waits for Lock 1.",isDeadlock:!1},{aHolds:"Lock 1",aWants:"Lock 2",bHolds:null,bWants:"Lock 1",description:"Thread A acquires Lock 2 (available). Thread B still waits.",isDeadlock:!1},{aHolds:"Lock 1 + 2",aWants:null,bHolds:null,bWants:"Lock 1",description:"Thread A finishes and releases both locks.",isDeadlock:!1},{aHolds:null,aWants:null,bHolds:"Lock 1",bWants:"Lock 2",description:"Thread B acquires Lock 1, then Lock 2. No deadlock!",isDeadlock:!1},{aHolds:null,aWants:null,bHolds:"Lock 1 + 2",bWants:null,description:"Thread B finishes. Both threads completed successfully.",isDeadlock:!1}]:[{aHolds:null,aWants:"Lock 1",bHolds:null,bWants:"Lock 2",description:"Thread A wants Lock 1. Thread B wants Lock 2. (Different ordering!)",isDeadlock:!1},{aHolds:"Lock 1",aWants:null,bHolds:"Lock 2",bWants:null,description:"Thread A acquires Lock 1. Thread B acquires Lock 2.",isDeadlock:!1},{aHolds:"Lock 1",aWants:"Lock 2",bHolds:"Lock 2",bWants:null,description:"Thread A now needs Lock 2... but Thread B holds it.",isDeadlock:!1},{aHolds:"Lock 1",aWants:"Lock 2",bHolds:"Lock 2",bWants:"Lock 1",description:"Thread B now needs Lock 1... but Thread A holds it.",isDeadlock:!1},{aHolds:"Lock 1",aWants:"Lock 2",bHolds:"Lock 2",bWants:"Lock 1",description:"DEADLOCK! Both threads are blocked forever waiting for each other.",isDeadlock:!0}]}const U={fontSize:"0.7rem",fontWeight:700,color:"var(--sl-color-gray-3)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},u={padding:"0.35rem 0.75rem",borderRadius:"6px",border:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-bg)",color:"var(--sl-color-white)",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.15s"},A={...u,background:t.blue,color:"#fff",borderColor:t.blue};function Le(){const a=ve(),[c,E]=l.useState("race"),[W,g]=l.useState(!1),[x,ae]=l.useState(1),T=l.useRef(null),[B,I]=l.useState(0),[_,ee]=l.useState(!1),j=je(_),[M,H]=l.useState(0),[V,re]=l.useState(!1),w=Se(V),[P,D]=l.useState([]),[te,y]=l.useState([]),[L,ce]=l.useState(1),[C,de]=l.useState(1),[G,O]=l.useState(!1),h=l.useRef({prod:null,cons:null}),R=5,X=l.useRef(1),[he,z]=l.useState(Array(5).fill("thinking")),[ue,F]=l.useState(Array(5).fill(null)),[J,q]=l.useState(!1),[Q,Z]=l.useState(!1),b=l.useRef(null),se=c==="race"?B:M,ne=c==="race"?j.length-1:w.length-1;l.useEffect(()=>{if(!W){T.current&&clearTimeout(T.current);return}if(c!=="race"&&c!=="deadlock"){g(!1);return}if(se>=ne){g(!1);return}return T.current=setTimeout(()=>{c==="race"?I(r=>Math.min(r+1,j.length-1)):H(r=>Math.min(r+1,w.length-1))},1200/x),()=>{T.current&&clearTimeout(T.current)}},[W,se,ne,x,c,j.length,w.length]);const pe=l.useCallback(()=>{c==="race"?I(r=>Math.min(r+1,j.length-1)):c==="deadlock"&&H(r=>Math.min(r+1,w.length-1))},[c,j.length,w.length]),N=l.useCallback(()=>{g(!1),I(0),H(0),D([]),y([]),X.current=1,O(!1),h.current.prod&&clearInterval(h.current.prod),h.current.cons&&clearInterval(h.current.cons),z(Array(5).fill("thinking")),F(Array(5).fill(null)),q(!1),Z(!1),b.current&&clearInterval(b.current)},[]),ge=l.useCallback(()=>{O(!0),h.current.prod=setInterval(()=>{D(r=>{if(r.length>=R)return y(s=>[...s.slice(-9),"Producer: buffer FULL, waiting..."]),r;const n=X.current++;return y(s=>[...s.slice(-9),`Producer: added item ${n}`]),[...r,n]})},2e3/L),h.current.cons=setInterval(()=>{D(r=>{if(r.length===0)return y(s=>[...s.slice(-9),"Consumer: buffer EMPTY, waiting..."]),r;const n=r[0];return y(s=>[...s.slice(-9),`Consumer: removed item ${n}`]),r.slice(1)})},2500/C)},[L,C]),Y=l.useCallback(()=>{O(!1),h.current.prod&&clearInterval(h.current.prod),h.current.cons&&clearInterval(h.current.cons)},[]);l.useEffect(()=>()=>{Y(),b.current&&clearInterval(b.current)},[Y]),l.useEffect(()=>{if(G)return Y(),O(!0),h.current.prod=setInterval(()=>{D(r=>{if(r.length>=R)return y(s=>[...s.slice(-9),"Producer: buffer FULL, waiting..."]),r;const n=X.current++;return y(s=>[...s.slice(-9),`Producer: added item ${n}`]),[...r,n]})},2e3/L),h.current.cons=setInterval(()=>{D(r=>{if(r.length===0)return y(s=>[...s.slice(-9),"Consumer: buffer EMPTY, waiting..."]),r;const n=r[0];return y(s=>[...s.slice(-9),`Consumer: removed item ${n}`]),r.slice(1)})},2500/C),()=>{h.current.prod&&clearInterval(h.current.prod),h.current.cons&&clearInterval(h.current.cons)}},[L,C]);const le=l.useCallback(r=>{q(!0),Z(!1),z(Array(5).fill("thinking")),F(Array(5).fill(null));let n=0;b.current=setInterval(()=>{if(n++,r&&n===3){z(Array(5).fill("hungry")),F([0,1,2,3,4]),setTimeout(()=>{z(Array(5).fill("waiting")),Z(!0),b.current&&clearInterval(b.current),q(!1)},1e3/x);return}z(s=>{const o=[...s];return F(p=>{const d=[...p];for(let i=0;i<5;i++){const k=i,m=(i+1)%5;if(o[i]==="eating")o[i]="thinking",d[k]=null,d[m]=null;else if(o[i]==="thinking"&&Math.random()<.4)o[i]="hungry";else if(o[i]==="hungry"){const f=i===4?m:k,S=i===4?k:m;d[f]===null&&d[S]===null&&(d[f]=i,d[S]=i,o[i]="eating")}}return d}),o})},1e3/x)},[x]),me=l.useCallback(()=>{b.current&&clearInterval(b.current),q(!1)},[]),ie=()=>{if(c==="producer-consumer"||c==="philosophers")return null;const r=c==="race"?B:M,n=c==="race"?j.length-1:w.length-1;return e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("button",{style:u,onClick:()=>g(s=>!s),children:W?"Pause":"Play"}),e.jsx("button",{style:u,onClick:pe,disabled:r>=n,children:"Step"}),e.jsx("button",{style:u,onClick:N,children:"Reset"}),e.jsxs("label",{style:{fontSize:"0.78rem",color:"var(--sl-color-gray-3)",display:"flex",alignItems:"center",gap:"0.35rem"},children:["Speed",e.jsx("input",{type:"range",min:.5,max:3,step:.5,value:x,onChange:s=>ae(Number(s.target.value)),style:{width:70}}),e.jsxs("span",{style:{fontWeight:600},children:[x,"x"]})]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-4)",marginLeft:"auto"},children:["Step ",r+1," / ",n+1]})]})},fe=()=>{const r=j[B],n=2,s=B===j.length-1;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{...U,marginBottom:0},children:"Mode:"}),e.jsx("button",{style:_?u:A,onClick:()=>{ee(!1),I(0),g(!1)},children:"Without Lock"}),e.jsx("button",{style:_?A:u,onClick:()=>{ee(!0),I(0),g(!1)},children:"With Lock (Mutex)"})]}),ie(),e.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[e.jsx("span",{style:U,children:"Shared Counter"}),e.jsx(v.div,{initial:{scale:1.3},animate:{scale:1},style:{display:"inline-block",fontSize:"2rem",fontWeight:800,color:r.isError?t.red:t.blue,background:"var(--sl-color-bg)",border:`2px solid ${r.isError?t.red:t.blue}`,borderRadius:"10px",padding:"0.25rem 1.25rem",minWidth:60},children:r.shared},r.shared)]}),e.jsx("div",{style:{display:"flex",gap:"1rem",flexDirection:a?"column":"row",marginBottom:"1rem"},children:["A","B"].map(o=>{const p=o==="A"?r.threadA:r.threadB,d=r.highlight===o||r.highlight==="both",i=o==="A"?t.blue:t.purple;return e.jsxs("div",{style:{flex:1,border:`2px solid ${d?i:"var(--sl-color-gray-5)"}`,borderRadius:"8px",padding:"0.75rem",background:d?`${i}15`:"transparent",transition:"all 0.3s"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",color:i,marginBottom:"0.35rem"},children:["Thread ",o]}),e.jsx($,{mode:"wait",children:e.jsx(v.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},style:{fontSize:"0.82rem",fontFamily:"monospace",color:r.isError&&d?t.red:"var(--sl-color-white)"},children:p},`${B}-${o}`)})]},o)})}),e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},style:{padding:"0.75rem 1rem",borderRadius:"8px",background:r.isError?`${t.red}18`:`${t.blue}12`,border:`1px solid ${r.isError?t.red:t.blue}40`,fontSize:"0.82rem",color:"var(--sl-color-white)",lineHeight:1.5,marginBottom:"0.75rem"},children:r.description},B),s&&e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{padding:"0.5rem 1rem",borderRadius:"8px",background:`${t.green}15`,border:`1px solid ${t.green}`,fontSize:"0.82rem"},children:[e.jsx("strong",{children:"Expected:"})," ",n]}),e.jsxs("div",{style:{padding:"0.5rem 1rem",borderRadius:"8px",background:r.shared===n?`${t.green}15`:`${t.red}15`,border:`1px solid ${r.shared===n?t.green:t.red}`,fontSize:"0.82rem"},children:[e.jsx("strong",{children:"Actual:"})," ",r.shared," ",r.shared===n?" -- Correct!":" -- WRONG! Lost update"]})]})]})},xe=()=>{const r=w[M],n=(o,p)=>({width:a?110:130,padding:"0.75rem",borderRadius:"10px",border:`2px solid ${o}`,background:p?`${o}18`:"transparent",textAlign:"center",fontWeight:700,fontSize:"0.8rem",transition:"all 0.3s"}),s=(o,p)=>({width:a?60:70,height:a?60:70,borderRadius:"50%",border:`3px solid ${o?t.red:p?t.yellow:"var(--sl-color-gray-5)"}`,background:o?`${t.red}20`:p?`${t.yellow}15`:"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.72rem",transition:"all 0.3s"});return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{...U,marginBottom:0},children:"Mode:"}),e.jsx("button",{style:V?u:A,onClick:()=>{re(!1),H(0),g(!1)},children:"Deadlock Scenario"}),e.jsx("button",{style:V?A:u,onClick:()=>{re(!0),H(0),g(!1)},children:"Resolved (Lock Ordering)"})]}),ie(),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:a?"0.75rem":"1.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsxs("div",{style:n(t.blue,!!r.aHolds||!!r.aWants),children:["Thread A",r.aHolds&&e.jsxs("div",{style:{fontSize:"0.68rem",fontWeight:400,marginTop:4,color:t.green},children:["Holds: ",r.aHolds]}),r.aWants&&e.jsxs("div",{style:{fontSize:"0.68rem",fontWeight:400,marginTop:2,color:t.yellow},children:["Wants: ",r.aWants]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",alignItems:"center"},children:[e.jsx("div",{style:s(!!(r.aHolds?.includes("1")||r.bHolds?.includes("1")),!!(r.aWants?.includes("1")||r.bWants?.includes("1"))),children:"Lock 1"}),e.jsx("div",{style:s(!!(r.aHolds?.includes("2")||r.bHolds?.includes("2")),!!(r.aWants?.includes("2")||r.bWants?.includes("2"))),children:"Lock 2"})]}),e.jsxs("div",{style:n(t.purple,!!r.bHolds||!!r.bWants),children:["Thread B",r.bHolds&&e.jsxs("div",{style:{fontSize:"0.68rem",fontWeight:400,marginTop:4,color:t.green},children:["Holds: ",r.bHolds]}),r.bWants&&e.jsxs("div",{style:{fontSize:"0.68rem",fontWeight:400,marginTop:2,color:t.yellow},children:["Wants: ",r.bWants]})]})]}),e.jsx($,{children:r.isDeadlock&&e.jsx(v.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},style:{textAlign:"center",padding:"0.75rem",borderRadius:"8px",background:`${t.red}20`,border:`2px solid ${t.red}`,color:t.red,fontWeight:800,fontSize:"1.1rem",marginBottom:"0.75rem",letterSpacing:"0.04em"},children:"DEADLOCK DETECTED"})}),e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},style:{padding:"0.75rem 1rem",borderRadius:"8px",background:r.isDeadlock?`${t.red}18`:`${t.blue}12`,border:`1px solid ${r.isDeadlock?t.red:t.blue}40`,fontSize:"0.82rem",color:"var(--sl-color-white)",lineHeight:1.5},children:r.description},M)]})},ye=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[G?e.jsx("button",{style:{...u,borderColor:t.red,color:t.red},onClick:Y,children:"Stop"}):e.jsx("button",{style:A,onClick:ge,children:"Start"}),e.jsx("button",{style:u,onClick:N,children:"Reset"}),e.jsxs("label",{style:{fontSize:"0.78rem",color:"var(--sl-color-gray-3)",display:"flex",alignItems:"center",gap:"0.3rem"},children:["Producer",e.jsx("input",{type:"range",min:.5,max:3,step:.5,value:L,onChange:r=>ce(Number(r.target.value)),style:{width:60}}),e.jsxs("span",{style:{fontWeight:600},children:[L,"x"]})]}),e.jsxs("label",{style:{fontSize:"0.78rem",color:"var(--sl-color-gray-3)",display:"flex",alignItems:"center",gap:"0.3rem"},children:["Consumer",e.jsx("input",{type:"range",min:.5,max:3,step:.5,value:C,onChange:r=>de(Number(r.target.value)),style:{width:60}}),e.jsxs("span",{style:{fontWeight:600},children:[C,"x"]})]})]}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:U,children:["Bounded Buffer (capacity ",R,")"]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.4rem",flexWrap:"wrap"},children:Array.from({length:R}).map((r,n)=>{const s=P[n],o=P.length>=R,p=P.length===0;return e.jsx(v.div,{layout:!0,style:{width:a?44:54,height:a?44:54,borderRadius:"8px",border:`2px solid ${s!=null?t.green:o?t.red:p?t.yellow:"var(--sl-color-gray-5)"}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.9rem",background:s!=null?`${t.green}18`:"transparent",transition:"all 0.25s"},children:e.jsx($,{mode:"wait",children:s!=null&&e.jsx(v.span,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:s},s)})},n)})}),P.length>=R&&e.jsx("div",{style:{color:t.red,fontWeight:700,fontSize:"0.78rem",marginTop:"0.4rem"},children:"Buffer FULL"}),P.length===0&&G&&e.jsx("div",{style:{color:t.yellow,fontWeight:700,fontSize:"0.78rem",marginTop:"0.4rem"},children:"Buffer EMPTY"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"0.75rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:t.blue}}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600},children:"Producer"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:t.pink}}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600},children:"Consumer"})]})]}),e.jsxs("div",{style:{background:"var(--sl-color-bg)",border:"1px solid var(--sl-color-gray-5)",borderRadius:"8px",padding:"0.6rem 0.75rem",maxHeight:160,overflowY:"auto",fontFamily:"monospace",fontSize:"0.74rem",lineHeight:1.7},children:[te.length===0&&e.jsx("span",{style:{color:"var(--sl-color-gray-4)"},children:"Press Start to begin..."}),te.map((r,n)=>e.jsx("div",{style:{color:r.startsWith("Producer")?t.blue:t.pink},children:r},n))]})]}),be=()=>{const r=a?120:150,n=a?120:150,s=a?90:115,o=a?55:70,p=["P0","P1","P2","P3","P4"];return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[!J&&!Q&&e.jsx("button",{style:A,onClick:()=>le(!1),children:"Run (Safe)"}),!J&&!Q&&e.jsx("button",{style:{...u,borderColor:t.red,color:t.red},onClick:()=>le(!0),children:"Cause Deadlock"}),J&&e.jsx("button",{style:{...u,borderColor:t.red,color:t.red},onClick:me,children:"Stop"}),e.jsx("button",{style:u,onClick:N,children:"Reset"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:e.jsxs("svg",{width:r*2,height:n*2,viewBox:`0 0 ${r*2} ${n*2}`,children:[Array.from({length:5}).map((d,i)=>{const k=(i+.5)*2*Math.PI/5-Math.PI/2,m=r+o*Math.cos(k),f=n+o*Math.sin(k),S=ue[i]!==null;return e.jsxs("g",{children:[e.jsx("line",{x1:m-7,y1:f-10,x2:m+7,y2:f+10,stroke:S?t.red:"var(--sl-color-gray-4)",strokeWidth:S?3:2,strokeLinecap:"round"}),e.jsxs("text",{x:m+10,y:f+3,fontSize:"9",fill:"var(--sl-color-gray-4)",fontWeight:600,children:["F",i]})]},`f${i}`)}),p.map((d,i)=>{const k=i*2*Math.PI/5-Math.PI/2,m=r+s*Math.cos(k),f=n+s*Math.sin(k),S=he[i],K=oe[S];return e.jsxs("g",{children:[e.jsx("circle",{cx:m,cy:f,r:a?22:26,fill:`${K}30`,stroke:K,strokeWidth:2.5}),e.jsx("text",{x:m,y:f-5,textAnchor:"middle",fontSize:"11",fontWeight:700,fill:K,children:d}),e.jsx("text",{x:m,y:f+9,textAnchor:"middle",fontSize:"8",fill:K,children:S})]},d)})]})}),e.jsx($,{children:Q&&e.jsx(v.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},style:{textAlign:"center",padding:"0.75rem",borderRadius:"8px",background:`${t.red}20`,border:`2px solid ${t.red}`,color:t.red,fontWeight:800,fontSize:"1rem",marginBottom:"0.75rem"},children:"DEADLOCK! All philosophers hold left fork, wait for right."})}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(oe).map(([d,i])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.75rem"},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:i}}),e.jsx("span",{style:{textTransform:"capitalize"},children:d})]},d))})]})};return e.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"12px",padding:"1.25rem",fontFamily:"var(--sl-font, system-ui, sans-serif)",color:"var(--sl-color-white)",overflow:"hidden"},children:[e.jsx("h3",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:700,color:"var(--sl-color-white)"},children:"Concurrency Visualizer"}),e.jsx("div",{style:{display:"flex",gap:"0.35rem",marginBottom:"1.25rem",overflowX:"auto",paddingBottom:"0.25rem"},children:ke.map(r=>e.jsx("button",{onClick:()=>{E(r.key),N()},style:{...c===r.key?A:u,whiteSpace:"nowrap",flexShrink:0,fontSize:a?"0.72rem":"0.8rem",padding:a?"0.3rem 0.55rem":"0.35rem 0.75rem"},children:r.label},r.key))}),e.jsx($,{mode:"wait",children:e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[c==="race"&&fe(),c==="deadlock"&&xe(),c==="producer-consumer"&&ye(),c==="philosophers"&&be()]},c)})]})}export{Le as default};
