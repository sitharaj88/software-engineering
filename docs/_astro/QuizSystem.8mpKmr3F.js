import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as c}from"./index.DK-fsZOb.js";import{m as u}from"./proxy.i6brGrIQ.js";import{A as I}from"./index.CMzh-1wI.js";function q({questions:p,title:k="Knowledge Check",shuffleQuestions:j=!1}){const g=c.useMemo(()=>{if(!j)return p;const r=[...p];for(let t=r.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[r[t],r[s]]=[r[s],r[t]]}return r},[p,j]),[o,v]=c.useState(0),[l,x]=c.useState(null),[i,S]=c.useState({}),[z,y]=c.useState(!1),[R,w]=c.useState(!1),n=g[o],f=o in i,b=Object.values(i).filter(r=>r.correct).length,d=g.length,W=c.useCallback(()=>{if(l===null)return;const r=l===n.correct;S(t=>({...t,[o]:{selected:l,correct:r}})),y(!0)},[l,n,o]),A=c.useCallback(()=>{o<d-1?(v(o+1),x(null),y(!1)):w(!0)},[o,d]),B=()=>{v(0),x(null),S({}),y(!1),w(!1)},C={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};if(R){const r=Math.round(b/d*100),t=r>=90?"A":r>=80?"B":r>=70?"C":r>=60?"D":"F",s=r>=80?"#10b981":r>=60?"#f59e0b":"#ef4444";return e.jsx("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"0.75rem",overflow:"hidden",margin:"1.5rem 0"},children:e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsxs(u.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:[e.jsx("div",{style:{fontSize:"4rem",fontWeight:900,color:s,lineHeight:1},children:t}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0.5rem 0"},children:[b,"/",d," Correct"]}),e.jsxs("div",{style:{fontSize:"1.1rem",color:"var(--sl-color-gray-3)"},children:[r,"%"]})]}),e.jsx("div",{style:{margin:"1.5rem 0"},children:e.jsx("div",{style:{height:8,background:"var(--sl-color-gray-5)",borderRadius:4,overflow:"hidden"},children:e.jsx(u.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,ease:"easeOut"},style:{height:"100%",background:s,borderRadius:4}})})}),e.jsx("p",{style:{color:"var(--sl-color-gray-3)",fontSize:"0.9rem",marginBottom:"1.5rem"},children:r>=90?"Excellent! You have a strong understanding of this topic.":r>=70?"Good job! Review the explanations for questions you missed.":"Keep studying! Review the material and try again."}),e.jsx("div",{style:{textAlign:"left",marginBottom:"1.5rem"},children:g.map((m,a)=>{const h=i[a];return e.jsxs("div",{style:{padding:"0.6rem 0.8rem",borderRadius:"0.375rem",marginBottom:"0.4rem",background:h?.correct?"#10b98115":"#ef444415",border:`1px solid ${h?.correct?"#10b981":"#ef4444"}30`,display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem"},children:[e.jsxs("span",{children:[a+1,". ",m.question.slice(0,60),"..."]}),e.jsx("span",{style:{color:h?.correct?"#10b981":"#ef4444",fontWeight:600},children:h?.correct?"✓":"✗"})]},a)})}),e.jsx("button",{onClick:B,style:{padding:"0.6rem 1.5rem",borderRadius:"0.375rem",border:"none",background:"#0066cc",color:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"↺ Try Again"})]})})}return e.jsxs("div",{style:{border:"1px solid var(--sl-color-gray-5)",borderRadius:"0.75rem",overflow:"hidden",margin:"1.5rem 0"},children:[e.jsxs("div",{style:{padding:"0.75rem 1.25rem",borderBottom:"1px solid var(--sl-color-gray-5)",background:"var(--sl-color-gray-6)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:k}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--sl-color-gray-3)"},children:["Question ",o+1," of ",d]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"999px",fontSize:"0.7rem",fontWeight:600,background:`${C[n.difficulty]}20`,color:C[n.difficulty]},children:n.difficulty.toUpperCase()}),e.jsxs("span",{style:{fontSize:"0.85rem",fontWeight:600,color:"#10b981"},children:[b,"/",d]})]})]}),e.jsx("div",{style:{height:3,background:"var(--sl-color-gray-5)"},children:e.jsx("div",{style:{height:"100%",background:"#0066cc",width:`${(o+1)/d*100}%`,transition:"width 0.3s"}})}),e.jsx("div",{style:{padding:"1.25rem"},children:e.jsx(I,{mode:"wait",children:e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("p",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem",lineHeight:1.5},children:n.question}),n.code&&e.jsx("pre",{style:{background:"#1e1e1e",color:"#e0e0e0",padding:"1rem",borderRadius:"0.5rem",fontSize:"0.85rem",overflow:"auto",marginBottom:"1rem",fontFamily:'"Fira Code", monospace'},children:n.code}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1rem"},children:n.options.map((r,t)=>{let s="transparent",m="1px solid var(--sl-color-gray-4)",a="var(--sl-color-text)";return f?t===n.correct?(s="#10b98120",m="2px solid #10b981",a="#10b981"):t===i[o].selected&&!i[o].correct&&(s="#ef444420",m="2px solid #ef4444",a="#ef4444"):l===t&&(s="#0066cc20",m="2px solid #0066cc",a="#0066cc"),e.jsxs("button",{onClick:()=>!f&&x(t),disabled:f,style:{padding:"0.7rem 1rem",borderRadius:"0.5rem",border:m,background:s,color:a,cursor:f?"default":"pointer",textAlign:"left",fontSize:"0.9rem",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.6rem"},children:[e.jsx("span",{style:{width:24,height:24,borderRadius:"50%",border:"2px solid currentColor",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:700,flexShrink:0},children:String.fromCharCode(65+t)}),r]},t)})}),z&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{padding:"1rem",borderRadius:"0.5rem",background:i[o]?.correct?"#10b98110":"#ef444410",border:`1px solid ${i[o]?.correct?"#10b981":"#ef4444"}30`,marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"0.85rem",marginBottom:"0.3rem",color:i[o]?.correct?"#10b981":"#ef4444"},children:i[o]?.correct?"✓ Correct!":"✗ Incorrect"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--sl-color-gray-2)",margin:0,lineHeight:1.5},children:n.explanation})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f?e.jsx("button",{onClick:A,style:{padding:"0.5rem 1.2rem",borderRadius:"0.375rem",border:"none",background:"#0066cc",color:"#fff",cursor:"pointer",fontWeight:600,fontSize:"0.85rem"},children:o<d-1?"Next Question →":"View Results"}):e.jsx("button",{onClick:W,disabled:l===null,style:{padding:"0.5rem 1.2rem",borderRadius:"0.375rem",border:"none",background:l!==null?"#0066cc":"#6b7280",color:"#fff",cursor:l!==null?"pointer":"not-allowed",fontWeight:600,fontSize:"0.85rem"},children:"Check Answer"}),e.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:g.map((r,t)=>e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:t in i?i[t].correct?"#10b981":"#ef4444":t===o?"#0066cc":"var(--sl-color-gray-4)"}},t))})]})]},o)})})]})}export{q as default};
